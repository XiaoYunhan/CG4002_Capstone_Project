{"remainingRequest":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\src\\components\\PastDanceSets.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\src\\components\\PastDanceSets.vue","mtime":1601956331781},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHBzbmQgZnJvbSAiLi9QZXJzaXN0ZW50U2lkZU5hdkRyYXdlciI7DQppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7DQppbXBvcnQgUGllQ2hhcnRTdGF0aWMgZnJvbSAiLi9DaGFydHMvUGllQ2hhcnRTdGF0aWMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQYXN0RGFuY2VTZXRzIiwNCg0KICBjb21wb25lbnRzOiB7DQogICAgcHNuZCwNCiAgICBQaWVDaGFydFN0YXRpYywNCiAgfSwNCiAgZGF0YTogKCkgPT4gKHsNCiAgICBudW1EYW5jZVNldDogbnVsbCwNCiAgICBzZWFyY2g6IG51bGwsDQogICAgc2VsZWN0ZWRDaGFydDogbnVsbCwNCiAgICBzZWxlY3RlZERhbmNlcnM6IG51bGwsDQogICAgY2hhcnRUeXBlOiBbDQogICAgICB7IG5hbWU6ICJEYW5jZSBUYWJsZSIsIHZhbHVlOiAiVGFibGUiIH0sDQogICAgICB7IG5hbWU6ICJTeW5jIENoYXJ0IiwgdmFsdWU6ICJQaWUiIH0sDQogICAgXSwNCiAgICBkYW5jZXJzOiBbDQogICAgICB7IG5hbWU6ICJKaW5neHVhbiIsIHZhbHVlOiAiSmluZ3h1YW4iIH0sDQogICAgICB7IG5hbWU6ICJLYXJhbiIsIHZhbHVlOiAiS2FyYW4iIH0sDQogICAgICB7IG5hbWU6ICJLZXhpbiIsIHZhbHVlOiAiS2V4aW4iIH0sDQogICAgICB7IG5hbWU6ICJTYXJhaCIsIHZhbHVlOiAiU2FyYWgiIH0sDQogICAgICB7IG5hbWU6ICJUcmlzdHkiLCB2YWx1ZTogIlRyaXN0eSIgfSwNCiAgICAgIHsgbmFtZTogIll1bmhhbiIsIHZhbHVlOiAiWXVuaGFuIiB9LA0KICAgIF0sDQogICAgaGVhZGVyczogWw0KICAgICAgeyB0ZXh0OiAiTm8uIiwgdmFsdWU6ICJtb3ZlX251bWJlciIgfSwNCiAgICAgIHsgdGV4dDogIkRhbmNlIE1vdmUiLCB2YWx1ZTogImRhbmNlX21vdmUiIH0sDQogICAgICB7IHRleHQ6ICJMZWZ0IERhbmNlciIsIHZhbHVlOiAibGVmdF9kYW5jZXIiIH0sDQogICAgICB7IHRleHQ6ICJDZW50ZXIgRGFuY2VyIiwgdmFsdWU6ICJjZW50ZXJfZGFuY2VyIiB9LA0KICAgICAgeyB0ZXh0OiAiUmlnaHQgRGFuY2VyIiwgdmFsdWU6ICJyaWdodF9kYW5jZXIiIH0sDQogICAgICB7DQogICAgICAgIHRleHQ6ICJTeW5jIERlbGF5IChzZWNvbmRzKSIsDQogICAgICAgIHZhbHVlOiAiZGlmZiIsDQogICAgICB9LA0KICAgICAgew0KICAgICAgICB0ZXh0OiAiSW4gU3luYz8iLA0KICAgICAgICB2YWx1ZTogInN5bmMiLA0KICAgICAgfSwNCiAgICBdLA0KICAgIGhlYWRlcnNUYWJsZU9ubHk6IFsNCiAgICAgIHsgdGV4dDogIk5vLiIsIHZhbHVlOiAibW92ZV9udW1iZXIiIH0sDQogICAgICB7IHRleHQ6ICJEYW5jZSBNb3ZlIiwgdmFsdWU6ICJkYW5jZV9tb3ZlIiB9LA0KICAgICAgeyB0ZXh0OiAiVGltZSAoTGVmdCkiLCB2YWx1ZTogImxlZnRfdGltZSIgfSwNCiAgICAgIHsgdGV4dDogIkxlZnQgRGFuY2VyIiwgdmFsdWU6ICJsZWZ0X2RhbmNlciIgfSwNCiAgICAgIHsgdGV4dDogIlRpbWUgKENlbnRlcikiLCB2YWx1ZTogImNlbnRlcl90aW1lIiB9LA0KICAgICAgeyB0ZXh0OiAiQ2VudGVyIERhbmNlciIsIHZhbHVlOiAiY2VudGVyX2RhbmNlciIgfSwNCiAgICAgIHsgdGV4dDogIlRpbWUgKFJpZ2h0KSIsIHZhbHVlOiAicmlnaHRfdGltZSIgfSwNCiAgICAgIHsgdGV4dDogIlJpZ2h0IERhbmNlciIsIHZhbHVlOiAicmlnaHRfZGFuY2VyIiB9LA0KICAgICAgew0KICAgICAgICB0ZXh0OiAiU3luYyBEZWxheSAoc2Vjb25kcykiLA0KICAgICAgICB2YWx1ZTogImRpZmYiLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGV4dDogIkluIFN5bmM/IiwNCiAgICAgICAgdmFsdWU6ICJzeW5jIiwNCiAgICAgIH0sDQogICAgXSwNCiAgICBkYW5jZXM6IFtdLA0KICAgIGxvYWRlZDogZmFsc2UsDQogICAgZGFuY2VTZXROdW06IFtdLA0KICAgIGRhdGVNZW51OiBmYWxzZSwNCiAgICBkYXRlVmFsOiBudWxsLA0KICAgIGdldEVuZERhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHIoMCwgMTApLA0KICAgIHRhYmxlUmVzcG9uc2VMZW5ndGg6IG51bGwsDQogICAgcGllUmVzcG9uc2VMZW5ndGg6IG51bGwsDQogICAgcGllOiBbXSwNCiAgICBwaWVEYXRlOiBbXSwNCiAgICB0YWJsZURhdGU6IFtdLA0KICAgIGRhbmNlU2V0QXJyOiBbXSwNCiAgICBudW1PZlJlY29yZHM6IG51bGwsDQogICAgZGFuY2VUaW1lQXJyYXk6IFtdLA0KICAgIHN0YXJ0VGltZTogbnVsbCwNCiAgICBlbmRUaW1lOiBudWxsLA0KICAgIGhhdmVQaWU6IHRydWUsDQogICAgaGF2ZVRhYmxlOiB0cnVlLA0KICAgIGNoYXJ0T3B0aW9uczogew0KICAgICAgbGVnZW5kOiB7DQogICAgICAgIGRpc3BsYXk6IHRydWUsDQogICAgICB9LA0KICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSwNCiAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IHRydWUsDQogICAgICBwbHVnaW5zOiB7DQogICAgICAgIGRhdGFsYWJlbHM6IHsNCiAgICAgICAgICBjb2xvcjogIndoaXRlIiwNCiAgICAgICAgICB0ZXh0QWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgIGZvbnQ6IHsNCiAgICAgICAgICAgIHdlaWdodDogImJvbGQiLA0KICAgICAgICAgICAgc2l6ZTogMTYsDQogICAgICAgICAgfSwNCiAgICAgICAgfSwNCiAgICAgIH0sDQogICAgICB0b29sdGlwczogew0KICAgICAgICBjYWxsYmFja3M6IHsNCiAgICAgICAgICBsYWJlbDogZnVuY3Rpb24gKHRvb2x0aXBJdGVtLCBkYXRhKSB7DQogICAgICAgICAgICB2YXIgYWxsRGF0YSA9IGRhdGEuZGF0YXNldHNbdG9vbHRpcEl0ZW0uZGF0YXNldEluZGV4XS5kYXRhOw0KICAgICAgICAgICAgdmFyIHRvb2x0aXBMYWJlbCA9IGRhdGEubGFiZWxzW3Rvb2x0aXBJdGVtLmluZGV4XTsNCiAgICAgICAgICAgIHZhciB0b29sdGlwRGF0YSA9IGFsbERhdGFbdG9vbHRpcEl0ZW0uaW5kZXhdOw0KICAgICAgICAgICAgdmFyIHRvdGFsID0gMDsNCiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gYWxsRGF0YSkgew0KICAgICAgICAgICAgICB0b3RhbCArPSBhbGxEYXRhW2ldOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIHRvb2x0aXBQZXJjZW50YWdlID0gTWF0aC5yb3VuZCgodG9vbHRpcERhdGEgLyB0b3RhbCkgKiAxMDApOw0KICAgICAgICAgICAgcmV0dXJuICgNCiAgICAgICAgICAgICAgdG9vbHRpcExhYmVsICsNCiAgICAgICAgICAgICAgIjogIiArDQogICAgICAgICAgICAgIHRvb2x0aXBEYXRhICsNCiAgICAgICAgICAgICAgIiAoIiArDQogICAgICAgICAgICAgIHRvb2x0aXBQZXJjZW50YWdlICsNCiAgICAgICAgICAgICAgIiUpIg0KICAgICAgICAgICAgKTsNCiAgICAgICAgICB9LA0KICAgICAgICB9LA0KICAgICAgfSwNCiAgICB9LA0KICB9KSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBkYXRlRGlzcCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmRhdGVWYWw7DQogICAgfSwNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGNsZWFyQ2hhcnRzOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLnNlbGVjdGVkQ2hhcnQgPSBudWxsOw0KICAgIH0sDQogICAgc2VsZWN0Q2hhcnQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2hhcnQgIT0gbnVsbCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENoYXJ0ID09PSAiVGFibGUiKSB7DQogICAgICAgICAgY29uc29sZS5sb2coImdldCBkYXRhIGZyb20gRGFuY2UiKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkQ2hhcnQgPT09ICJQaWUiKSB7DQogICAgICAgICAgY29uc29sZS5sb2coImdldCBkYXRhIGZyb20gU3luYyIpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiZGlzcGxheSBhbGwgZGFuY2VycyIpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJEYW5jZVNldDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOw0KICAgIH0sDQogICAgc2VsZWN0RGFuY2VTZXQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLnNlYXJjaCAhPSBudWxsICYmIHRoaXMuc2VhcmNoLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuc2VhcmNoLmxlbmd0aDsNCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsZW5ndGg7IGsrKykgew0KICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VhcmNoW2tdKTsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWFyY2ggPSBudWxsOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJEYW5jZXJzOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLnNlbGVjdGVkRGFuY2VycyA9IG51bGw7DQogICAgfSwNCiAgICBzZWxlY3REYW5jZXJzOiBmdW5jdGlvbiAoKSB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZERhbmNlcnMgIT0gbnVsbCAmJiB0aGlzLnNlbGVjdGVkRGFuY2Vycy5sZW5ndGggPiAwKSB7DQogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLnNlbGVjdGVkRGFuY2Vycy5sZW5ndGg7DQogICAgICAgIGlmIChsZW5ndGggPiAzKSB7DQogICAgICAgICAgU3dhbC5maXJlKHsNCiAgICAgICAgICAgIGljb246ICJlcnJvciIsDQogICAgICAgICAgICB0aXRsZTogIk9vcHMuLi4iLA0KICAgICAgICAgICAgdGV4dDogIkEgbWF4aW11bSBvZiAzIGRhbmNlcnMgYXJlIGFsbG93ZWQhIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLnNlbGVjdGVkRGFuY2Vycy5wb3AoKTsNCiAgICAgICAgfQ0KICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc2VsZWN0ZWREYW5jZXJzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZERhbmNlcnNbaV0pOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnNlbGVjdGVkRGFuY2VycyA9IG51bGw7DQogICAgICB9DQogICAgfSwNCiAgICBjbGVhckRhdGVzOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLmRhdGVWYWwgPSBudWxsOw0KICAgIH0sDQogICAgc2VsZWN0RGF0ZXM6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLmRhdGVWYWwgIT0gbnVsbCkgew0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGVWYWwubGVuZ3RoKTsNCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmRhdGVWYWwubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGVWYWxbal0pOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiZGlzcGxheSBhbGwgZGF0ZXMiKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHN1Ym1pdDogZnVuY3Rpb24gKCkgew0KICAgICAgLy8gZGF0YSBpbiBzZWxlY3RlZERhbmNlcnMgYXJlIHRvIGJlIHRha2VuIGFzIEFORCBpLmUuIHRoZSBkYW5jZSBzZXRzIG11c3QgY29udGFpbiB0aGUgZGFuY2VyIG5hbWVzDQogICAgICAvLyBkYXRhIGluIGRhdGVWYWwgaXMgdG8gYmUgdGFrZW4gYXMgT1INCiAgICAgIC8vIGRhdGEgaW4gc2VhcmNoIGlzIHRvIGJlIHRha2VuIGFzIE9SDQogICAgICAvLyBzZWxlY3RlZENoYXJ0IHJlZmVycyB0byB0aGUgREIgVGFibGUgKFRhYmxlOiBEYW5jZSwgUGllOiBTeW5jKQ0KICAgICAgLy8gU0VMRUNUICogRlJPTSBEYW5jZS9TeW5jIFdIRVJFIChkYW5jZXJOYW1lcz0nJXRoaXMuc2VsZWN0ZWREYW5jZXJzJScpIGkuZS4gUGF0dGVybiBNYXRjaGluZw0KICAgICAgLy8gIEFORCAodGhpcy5kYXRlVmFsKSBBTkQgKHRoaXMuc2VhcmNoKQ0KDQogICAgICBjb25zb2xlLmxvZygiRGFuY2VyczogIiArIHRoaXMuc2VsZWN0ZWREYW5jZXJzKTsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRGFuY2VycyAhPSBudWxsKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWREYW5jZXJzID0gdGhpcy5zZWxlY3RlZERhbmNlcnMuc29ydCgpOw0KICAgICAgICB2YXIgZGFuY2VycyA9ICciJzsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGVkRGFuY2Vycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGRhbmNlcnMgKz0gdGhpcy5zZWxlY3RlZERhbmNlcnNbaV0gKyAiLCI7DQogICAgICAgIH0NCiAgICAgICAgZGFuY2VycyA9IGRhbmNlcnMuc2xpY2UoMCwgLTEpOw0KICAgICAgICBkYW5jZXJzICs9ICciJzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRhbmNlcnMgPSBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5kYXRlVmFsICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy5kYXRlVmFsID0gdGhpcy5kYXRlVmFsLnNvcnQoKTsNCiAgICAgICAgdmFyIGRhdGVzID0gJyInOw0KICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuZGF0ZVZhbC5sZW5ndGg7IGorKykgew0KICAgICAgICAgIGRhdGVzICs9IHRoaXMuZGF0ZVZhbFtqXSArICIsIjsNCiAgICAgICAgfQ0KICAgICAgICBkYXRlcyA9IGRhdGVzLnNsaWNlKDAsIC0xKTsNCiAgICAgICAgZGF0ZXMgKz0gJyInOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZGF0ZXMgPSBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5zZWFyY2ggIT0gbnVsbCkgew0KICAgICAgICB0aGlzLnNlYXJjaCA9IHRoaXMuc2VhcmNoLnNvcnQoKTsNCiAgICAgICAgdmFyIHNlYXJjaERhbmNlU2V0cyA9ICciJzsNCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLnNlYXJjaC5sZW5ndGg7IGsrKykgew0KICAgICAgICAgIHNlYXJjaERhbmNlU2V0cyArPSB0aGlzLnNlYXJjaFtrXSArICIsIjsNCiAgICAgICAgfQ0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgPSBzZWFyY2hEYW5jZVNldHMuc2xpY2UoMCwgLTEpOw0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgKz0gJyInOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc2VhcmNoRGFuY2VTZXRzID0gbnVsbDsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgcGFzdERhdGFUb1NlbmQgPQ0KICAgICAgICAneyJjaGFydCI6IicgKw0KICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcnQgKw0KICAgICAgICAnIiwgJyArDQogICAgICAgICciZGFuY2VycyI6JyArDQogICAgICAgIGRhbmNlcnMgKw0KICAgICAgICAnLCAiZGF0ZXMiOicgKw0KICAgICAgICBkYXRlcyArDQogICAgICAgICcsICJzZWFyY2giOicgKw0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgKw0KICAgICAgICAifSI7DQogICAgICAvLyBjb25zb2xlLmxvZyhwYXN0RGF0YVRvU2VuZCk7DQogICAgICB2YXIganNvblBhc3REYXRhVG9TZW5kID0gSlNPTi5wYXJzZShwYXN0RGF0YVRvU2VuZCk7DQogICAgICBjb25zb2xlLmxvZygiUGFzdCBEYXRhIFRvIFNlbmQ6ICIgKyBKU09OLnN0cmluZ2lmeShqc29uUGFzdERhdGFUb1NlbmQpKTsNCg0KICAgICAgYXhpb3MNCiAgICAgICAgLnBvc3QoIi9kYXNoYm9hcmQvcGFzdC1kYXRhIiwgew0KICAgICAgICAgIHBhc3REYXRhOiBqc29uUGFzdERhdGFUb1NlbmQsDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIHRoaXMuZGFuY2VzID0gW107DQogICAgICAgICAgdGhpcy50YWJsZURhdGUgPSBbXTsNCiAgICAgICAgICB0aGlzLmRhbmNlU2V0QXJyID0gW107DQogICAgICAgICAgdGhpcy5waWUgPSBbXTsNCiAgICAgICAgICB0aGlzLnBpZURhdGUgPSBbXTsNCiAgICAgICAgICB0aGlzLmRhbmNlVGltZUFycmF5ID0gW107DQoNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPiAwICYmDQogICAgICAgICAgICAocmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aCA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aCA9PSAwKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgLy8gaWYgaGF2ZSB0YWJsZSBkYXRhIGJ1dCBubyBwaWUgY2hhcnQgZGF0YSwgdGhlbiBkaXNwbGF5IG9ubHkgdGFibGUNCiAgICAgICAgICAgIHRoaXMuaGF2ZVRhYmxlID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMuaGF2ZVBpZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoOw0KDQogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMudGFibGVSZXNwb25zZUxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgIHZhciBkYXRlX3V0YyA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhdGVzKTsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfY29udmVydF90b19zZ3QgPSBkYXRlX3V0Yy50b1N0cmluZygpOw0KICAgICAgICAgICAgICB2YXIgc3BsaXRfc2d0X2RhdGVfYnlfc3BhY2UgPSBkYXRlX2NvbnZlcnRfdG9fc2d0LnNwbGl0KCIgIik7DQogICAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRfZGF0ZSA9DQogICAgICAgICAgICAgICAgc3BsaXRfc2d0X2RhdGVfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgc3BsaXRfc2d0X2RhdGVfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgc3BsaXRfc2d0X2RhdGVfYnlfc3BhY2VbM107DQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5tb3ZlX251bWJlciA9PSAxKSB7DQogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGUucHVzaChmb3JtYXR0ZWRfZGF0ZSk7DQogICAgICAgICAgICAgICAgdGhpcy5kYW5jZVNldEFyci5wdXNoKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX3NldCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX21vdmUgPT0gIlN0YXJ0Iikgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZV9zcGxpdCA9IHRoaXMuc3RhcnRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZV9zcGxpdFswXSA9PSAiMjQiKSB7DQogICAgICAgICAgICAgICAgICBzdGFydFRpbWVfc3BsaXRbMF0gPT0gIjAwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBzdGFydFRpbWVfc3BsaXRbMF0gKyAiOiIgKyBzdGFydFRpbWVfc3BsaXRbMV07DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2VfbW92ZSA9PSAiRW5kIikgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIGVuZFRpbWVfc3BsaXQgPSB0aGlzLmVuZFRpbWUuc3BsaXQoIjoiKTsNCiAgICAgICAgICAgICAgICBpZiAoZW5kVGltZV9zcGxpdFswXSA9PSAiMjQiKSB7DQogICAgICAgICAgICAgICAgICBlbmRUaW1lX3NwbGl0WzBdID09ICIwMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IGVuZFRpbWVfc3BsaXRbMF0gKyAiOiIgKyBlbmRUaW1lX3NwbGl0WzFdOw0KICAgICAgICAgICAgICAgIHZhciB0aW1lT2ZEYW5jZSA9IHRoaXMuc3RhcnRUaW1lICsgIiAtICIgKyB0aGlzLmVuZFRpbWU7DQogICAgICAgICAgICAgICAgdGhpcy5kYW5jZVRpbWVBcnJheS5wdXNoKHRpbWVPZkRhbmNlKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA9ICItIjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPSAiLSI7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA9ICItIjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIHZhciBkYW5jZUFyciA9IHsNCiAgICAgICAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX3NldCwNCiAgICAgICAgICAgICAgICBtb3ZlX251bWJlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubW92ZV9udW1iZXIsDQogICAgICAgICAgICAgICAgZGF0ZTogZm9ybWF0dGVkX2RhdGUsDQogICAgICAgICAgICAgICAgZGFuY2VfbW92ZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2VfbW92ZSwNCiAgICAgICAgICAgICAgICBsZWZ0X3RpbWU6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSwNCiAgICAgICAgICAgICAgICBsZWZ0X2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF9kYW5jZXIsDQogICAgICAgICAgICAgICAgY2VudGVyX3RpbWU6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lLA0KICAgICAgICAgICAgICAgIGNlbnRlcl9kYW5jZXI6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl9kYW5jZXIsDQogICAgICAgICAgICAgICAgcmlnaHRfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSwNCiAgICAgICAgICAgICAgICByaWdodF9kYW5jZXI6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X2RhbmNlciwNCiAgICAgICAgICAgICAgICBkaWZmOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kaWZmZXJlbmNlLA0KICAgICAgICAgICAgICAgIHN5bmM6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnN5bmMsDQogICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgIHRoaXMuZGFuY2VzLnB1c2goZGFuY2VBcnIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoID4gMCAmJg0KICAgICAgICAgICAgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhLmxlbmd0aCA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoID09IDApDQogICAgICAgICAgKSB7DQogICAgICAgICAgICAvLyBpZiBoYXZlIG9ubHkgcGllIGNoYXJ0IGRhdGEgYW5kIG5vIHRhYmxlIGRhdGEsIHRoZW4gZGlzcGxheSBvbmx5IHBpZSBjaGFydHMNCiAgICAgICAgICAgIHRoaXMuaGF2ZVBpZSA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmhhdmVUYWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5waWVSZXNwb25zZUxlbmd0aCA9IHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGg7DQogICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMucGllUmVzcG9uc2VMZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICB2YXIgcGllX2RhdGUgPSBuZXcgRGF0ZShyZXNwb25zZS5kYXRhLnBpZURhdGFba10uZGF0ZXMpOw0KICAgICAgICAgICAgICB2YXIgcGllX2RhdGVfc2d0ID0gcGllX2RhdGUudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgdmFyIHBpZV9kYXRlX3NwbGl0X2J5X3NwYWNlID0gcGllX2RhdGVfc2d0LnNwbGl0KCIgIik7DQogICAgICAgICAgICAgIHZhciBwaWVfZGF0ZV9zcGxpdCA9DQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbM107DQogICAgICAgICAgICAgIHRoaXMucGllRGF0ZS5wdXNoKHBpZV9kYXRlX3NwbGl0KTsNCiAgICAgICAgICAgICAgdGhpcy5kYW5jZVNldEFyci5wdXNoKHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5kYW5jZV9zZXQpOw0KICAgICAgICAgICAgICB2YXIgcGllQXJyID0gew0KICAgICAgICAgICAgICAgIGRhbmNlX3NldDogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLmRhbmNlX3NldCwNCiAgICAgICAgICAgICAgICBkYXRlOiBwaWVfZGF0ZV9zcGxpdCwNCiAgICAgICAgICAgICAgICB5ZXNfc3luYzogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLnllc19zeW5jLA0KICAgICAgICAgICAgICAgIG5vX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5ub19zeW5jLA0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICB0aGlzLnBpZS5wdXNoKHBpZUFycik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBpZSk7DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIChyZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoID09IHVuZGVmaW5lZCAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPT0gdW5kZWZpbmVkKSB8fA0KICAgICAgICAgICAgKHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGggPT0gMCAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPT0gMCkNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIC8vIGlmIG5vdCB0YWJsZSBhbmQgbm8gcGllIGNoYXJ0IGRhdGEsIHRoZW4gc2V0IGhhdmVUYWJsZSBhbmQgaGF2ZVBpZSB0byBmYWxzZQ0KICAgICAgICAgICAgLy8gdG8gZGlzcGxheSBubyBkYXRhIGF2YWlsYWJsZSBtZXNzYWdlDQogICAgICAgICAgICB0aGlzLmhhdmVUYWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5oYXZlUGllID0gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIC8vIGlmIGhhdmUgYm90aCB0YWJsZSBhbmQgcGllIGNoYXJ0IGRhdGEsIHRoZW4gZGlzcGxheSBib3RoDQogICAgICAgICAgICB0aGlzLmhhdmVUYWJsZSA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmhhdmVQaWUgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoOw0KICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCB0aGlzLnRhYmxlUmVzcG9uc2VMZW5ndGg7IG0rKykgew0KICAgICAgICAgICAgICB2YXIgZGF0ZXMgPSBuZXcgRGF0ZShyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYXRlcyk7DQogICAgICAgICAgICAgIHZhciBzZ3RfZGF0ZSA9IGRhdGVzLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgIHZhciBzcGxpdF9kYXRlX2J5X3NwYWNlID0gc2d0X2RhdGUuc3BsaXQoIiAiKTsNCiAgICAgICAgICAgICAgdmFyIHNwbGl0X2RhdGUgPQ0KICAgICAgICAgICAgICAgIHNwbGl0X2RhdGVfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgc3BsaXRfZGF0ZV9ieV9zcGFjZVsxXSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBzcGxpdF9kYXRlX2J5X3NwYWNlWzNdOw0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubW92ZV9udW1iZXIgPT0gMSkgew0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRlLnB1c2goc3BsaXRfZGF0ZSk7DQogICAgICAgICAgICAgICAgdGhpcy5kYW5jZVNldEFyci5wdXNoKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRhbmNlX3NldCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRhbmNlX21vdmUgPT0gIlN0YXJ0Iikgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lICE9IG51bGwNCiAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgc3RhcnRUaW1lX3NwbGl0ID0gdGhpcy5zdGFydFRpbWUuc3BsaXQoIjoiKTsNCiAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lX3NwbGl0WzBdID09ICIyNCIpIHsNCiAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZV9zcGxpdFswXSA9PSAiMDAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHN0YXJ0VGltZV9zcGxpdFswXSArICI6IiArIHN0YXJ0VGltZV9zcGxpdFsxXTsNCiAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYW5jZV9tb3ZlID09ICJFbmQiKSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWU7DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZQ0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZQ0KICAgICAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWU7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWU7DQogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbmRUaW1lX3NwbGl0ID0gdGhpcy5lbmRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgICAgICAgaWYgKGVuZFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgICAgICAgZW5kVGltZV9zcGxpdFswXSA9PSAiMDAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBlbmRUaW1lX3NwbGl0WzBdICsgIjoiICsgZW5kVGltZV9zcGxpdFsxXTsNCiAgICAgICAgICAgICAgICB0aW1lT2ZEYW5jZSA9IHRoaXMuc3RhcnRUaW1lICsgIiAtICIgKyB0aGlzLmVuZFRpbWU7DQogICAgICAgICAgICAgICAgdGhpcy5kYW5jZVRpbWVBcnJheS5wdXNoKHRpbWVPZkRhbmNlKTsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSA9ICItIjsNCiAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPSAiLSI7DQogICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSA9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSA9ICItIjsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgZGFuY2VBcnJheSA9IHsNCiAgICAgICAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRhbmNlX3NldCwNCiAgICAgICAgICAgICAgICBtb3ZlX251bWJlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubW92ZV9udW1iZXIsDQogICAgICAgICAgICAgICAgZGF0ZTogc3BsaXRfZGF0ZSwNCiAgICAgICAgICAgICAgICBkYW5jZV9tb3ZlOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgICAgICAgIGxlZnRfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lLA0KICAgICAgICAgICAgICAgIGxlZnRfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X2RhbmNlciwNCiAgICAgICAgICAgICAgICBjZW50ZXJfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUsDQogICAgICAgICAgICAgICAgY2VudGVyX2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAgICAgICByaWdodF90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lLA0KICAgICAgICAgICAgICAgIHJpZ2h0X2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgICAgICAgIGRpZmY6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRpZmZlcmVuY2UsDQogICAgICAgICAgICAgICAgc3luYzogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uc3luYywNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdGhpcy5kYW5jZXMucHVzaChkYW5jZUFycmF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucGllUmVzcG9uc2VMZW5ndGggPSByZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoOw0KICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnBpZVJlc3BvbnNlTGVuZ3RoOyBuKyspIHsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfcGllID0gbmV3IERhdGUocmVzcG9uc2UuZGF0YS5waWVEYXRhW25dLmRhdGVzKTsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfcGllX3NndCA9IGRhdGVfcGllLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgIHZhciBkYXRlX3BpZV9zcGxpdF9ieV9zcGFjZSA9IGRhdGVfcGllX3NndC5zcGxpdCgiICIpOw0KICAgICAgICAgICAgICB2YXIgZGF0ZV9waWVfc3BsaXQgPQ0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzJdICsNCiAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzFdICsNCiAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzNdOw0KICAgICAgICAgICAgICB0aGlzLnBpZURhdGUucHVzaChkYXRlX3BpZV9zcGxpdCk7DQogICAgICAgICAgICAgIHZhciBwaWVBcnJheSA9IHsNCiAgICAgICAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtuXS5kYW5jZV9zZXQsDQogICAgICAgICAgICAgICAgZGF0ZTogZGF0ZV9waWVfc3BsaXQsDQogICAgICAgICAgICAgICAgeWVzX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtuXS55ZXNfc3luYywNCiAgICAgICAgICAgICAgICBub19zeW5jOiByZXNwb25zZS5kYXRhLnBpZURhdGFbbl0ubm9fc3luYywNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdGhpcy5waWUucHVzaChwaWVBcnJheSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMubnVtT2ZSZWNvcmRzID0gdGhpcy5kYW5jZVNldEFyci5sZW5ndGg7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0Q2hhcnREYXRhOiBmdW5jdGlvbiAoc2V0X251bWJlcikgew0KICAgICAgLy8gZ2V0IHRoZSBkYXRhIGZvciBwaWUgY2hhcnQgZm9yIGVhY2ggZGFuY2Ugc2V0DQogICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMucGllUmVzcG9uc2VMZW5ndGg7IG0rKykgew0KICAgICAgICBpZiAodGhpcy5waWVbbV0uZGFuY2Vfc2V0ID09IHNldF9udW1iZXIpIHsNCiAgICAgICAgICBsZXQgeWVzID0gdGhpcy5waWVbbV0ueWVzX3N5bmM7DQogICAgICAgICAgbGV0IG5vID0gdGhpcy5waWVbbV0ubm9fc3luYzsNCiAgICAgICAgICAvLyBjb25zb2xlLmxvZygiTnVtYmVyOiAiICsgc2V0X251bWJlcik7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coIlllczogIiArIHllcyArICIsIE5vOiAiICsgbm8pOw0KICAgICAgICAgIGxldCBwaWVDaGFydEFycmF5ID0gew0KICAgICAgICAgICAgbGFiZWxzOiBbIlllcyIsICJObyJdLA0KICAgICAgICAgICAgZGF0YXNldHM6IFsNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxLA0KICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBbInJnYmEoMjQ1LCA2NiwgMTU4LCAxKSIsICJyZ2JhKDY2LCAxOTQsIDI0NSwgMSkiXSwNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsNCiAgICAgICAgICAgICAgICAgICJyZ2JhKDI0NSwgNjYsIDE1OCwgMSkiLA0KICAgICAgICAgICAgICAgICAgInJnYmEoNjYsIDE5NCwgMjQ1LCAxKSIsDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICBkYXRhOiBbeWVzLCBub10sDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgIH07DQogICAgICAgICAgLy8gY29uc29sZS5sb2cocGllQ2hhcnRBcnJheSk7DQogICAgICAgICAgcmV0dXJuIHBpZUNoYXJ0QXJyYXk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGdldERhbmNlczogZnVuY3Rpb24gKHNldF9udW1iZXIpIHsNCiAgICAgIC8vIGlmIHRoZSBjaGFydCB0eXBlIGlzIG5vdCBzcGVjaWZpZWQgdGhlbiBnZXQNCiAgICAgIC8vIG1vdmUgbnVtYmVyLCBkYXRlLCBkYW5jZSBtb3ZlLCBkYW5jZXJzIGluIHRoZSAzIHBvc2l0aW9ucywgZGlmZmVyZW5jZSBpbiB0aW1pbmcNCiAgICAgIC8vIGJldHdlZW4gZmFzdGVzdCBhbmQgc2xvd2VzdCBkYW5jZXIgYW5kIHdoZXRoZXIgdGhlIGRhbmNlcnMgYXJlIGluIHN5bmMNCiAgICAgIC8vIG9yIG5vdCBmb3IgZWFjaCBkYW5jZSBtb3ZlDQogICAgICB2YXIgZGFuY2VEYXRhQXJyYXkgPSBbXTsNCiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoOyBqKyspIHsNCiAgICAgICAgaWYgKHRoaXMuZGFuY2VzW2pdLmRhbmNlX3NldCA9PSBzZXRfbnVtYmVyKSB7DQogICAgICAgICAgdmFyIGRhbmNlRGF0YSA9IHsNCiAgICAgICAgICAgIG1vdmVfbnVtYmVyOiB0aGlzLmRhbmNlc1tqXS5tb3ZlX251bWJlciwNCiAgICAgICAgICAgIGRhdGU6IHRoaXMuZGFuY2VzW2pdLmRhdGUsDQogICAgICAgICAgICBkYW5jZV9tb3ZlOiB0aGlzLmRhbmNlc1tqXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgICAgbGVmdF9kYW5jZXI6IHRoaXMuZGFuY2VzW2pdLmxlZnRfZGFuY2VyLA0KICAgICAgICAgICAgY2VudGVyX2RhbmNlcjogdGhpcy5kYW5jZXNbal0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAgIHJpZ2h0X2RhbmNlcjogdGhpcy5kYW5jZXNbal0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgICAgZGlmZjogdGhpcy5kYW5jZXNbal0uZGlmZiwNCiAgICAgICAgICAgIHN5bmM6IHRoaXMuZGFuY2VzW2pdLnN5bmMsDQogICAgICAgICAgfTsNCiAgICAgICAgICBkYW5jZURhdGFBcnJheS5wdXNoKGRhbmNlRGF0YSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBkYW5jZURhdGFBcnJheTsNCiAgICB9LA0KICAgIGdldERhbmNlc1RhYmxlT25seTogZnVuY3Rpb24gKHNldF9udW1iZXIpIHsNCiAgICAgIC8vIGlmIHRoZSBjaGFydCB0eXBlIGlzIHNwZWNpZmllZCB0byBiZSB0YWJsZSBvbmx5IHRoZW4gZGlzcGxheSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uDQogICAgICAvLyB0aW1lIG9mIGVhY2ggZGFuY2VyIGZvciBlYWNoIG1vdmUgZm9yIHRoZSBkYW5jZSBzZXRzDQogICAgICB2YXIgZGFuY2VEYXRhQXJyYXkgPSBbXTsNCiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoOyBqKyspIHsNCiAgICAgICAgaWYgKHRoaXMuZGFuY2VzW2pdLmRhbmNlX3NldCA9PSBzZXRfbnVtYmVyKSB7DQogICAgICAgICAgaWYgKHRoaXMuZGFuY2VzW2pdLmxlZnRfdGltZSA9PSBudWxsKSB7DQogICAgICAgICAgICB0aGlzLmRhbmNlc1tqXS5sZWZ0X3RpbWUgPSAiLSI7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgaWYgKHRoaXMuZGFuY2VzW2pdLmNlbnRlcl90aW1lID09IG51bGwpIHsNCiAgICAgICAgICAgIHRoaXMuZGFuY2VzW2pdLmNlbnRlcl90aW1lID0gIi0iOw0KICAgICAgICAgIH0NCg0KICAgICAgICAgIGlmICh0aGlzLmRhbmNlc1tqXS5yaWdodF90aW1lID09IG51bGwpIHsNCiAgICAgICAgICAgIHRoaXMuZGFuY2VzW2pdLnJpZ2h0X3RpbWUgPSAiLSI7DQogICAgICAgICAgfQ0KDQogICAgICAgICAgdmFyIGRhbmNlRGF0YSA9IHsNCiAgICAgICAgICAgIG1vdmVfbnVtYmVyOiB0aGlzLmRhbmNlc1tqXS5tb3ZlX251bWJlciwNCiAgICAgICAgICAgIGRhdGU6IHRoaXMuZGFuY2VzW2pdLmRhdGUsDQogICAgICAgICAgICBkYW5jZV9tb3ZlOiB0aGlzLmRhbmNlc1tqXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgICAgbGVmdF90aW1lOiB0aGlzLmRhbmNlc1tqXS5sZWZ0X3RpbWUsDQogICAgICAgICAgICBsZWZ0X2RhbmNlcjogdGhpcy5kYW5jZXNbal0ubGVmdF9kYW5jZXIsDQogICAgICAgICAgICBjZW50ZXJfdGltZTogdGhpcy5kYW5jZXNbal0uY2VudGVyX3RpbWUsDQogICAgICAgICAgICBjZW50ZXJfZGFuY2VyOiB0aGlzLmRhbmNlc1tqXS5jZW50ZXJfZGFuY2VyLA0KICAgICAgICAgICAgcmlnaHRfdGltZTogdGhpcy5kYW5jZXNbal0ucmlnaHRfdGltZSwNCiAgICAgICAgICAgIHJpZ2h0X2RhbmNlcjogdGhpcy5kYW5jZXNbal0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgICAgZGlmZjogdGhpcy5kYW5jZXNbal0uZGlmZiwNCiAgICAgICAgICAgIHN5bmM6IHRoaXMuZGFuY2VzW2pdLnN5bmMsDQogICAgICAgICAgfTsNCiAgICAgICAgICBkYW5jZURhdGFBcnJheS5wdXNoKGRhbmNlRGF0YSk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBkYW5jZURhdGFBcnJheTsNCiAgICB9LA0KICAgIGZldGNoRGF0YTogYXN5bmMgZnVuY3Rpb24gKCkgew0KICAgICAgLy8gZ2V0IGFsbCBwYXN0IGRhbmNlIHNldHMgZGF0YQ0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoIi9kYXNoYm9hcmQvcGFzdC1kYXRhIik7DQogICAgICB0aGlzLm51bURhbmNlU2V0ID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbMF0uZGFuY2Vfc2V0Ow0KICAgICAgLy8gdGhpcyBsb29wIGlzIHVzZWQgdG8gc2V0IHRoZSBvcHRpb25zIHVzZXJzIGNhbiBzZWxlY3QgZm9yIHRoZSBzcGVjaWZpYyBkYW5jZSBzZXRzIHRvIHZpZXcNCiAgICAgIC8vIGluIERhbmNlIFNldChzKSBkcm9wZG93bg0KICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gdGhpcy5udW1EYW5jZVNldDsgaSsrKSB7DQogICAgICAgIHZhciBhcnIgPSB7DQogICAgICAgICAgbmFtZTogaSwNCiAgICAgICAgICB2YWx1ZTogaSwNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5kYW5jZVNldE51bS5wdXNoKGFycik7DQogICAgICB9DQogICAgICB0aGlzLnRhYmxlUmVzcG9uc2VMZW5ndGggPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGg7DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMudGFibGVSZXNwb25zZUxlbmd0aDsgaisrKSB7DQogICAgICAgIC8vIGdldCB0aGUgZGF0ZSBvZiB0aGUgbW92ZQ0KICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhdGVzKTsNCiAgICAgICAgdmFyIGRhdGVfc2d0ID0gZGF0ZS50b1N0cmluZygpOw0KICAgICAgICB2YXIgZGF0ZV9zcGxpdF9ieV9zcGFjZSA9IGRhdGVfc2d0LnNwbGl0KCIgIik7DQogICAgICAgIHZhciBkYXRlX3NwbGl0ID0NCiAgICAgICAgICBkYXRlX3NwbGl0X2J5X3NwYWNlWzJdICsNCiAgICAgICAgICAiICIgKw0KICAgICAgICAgIGRhdGVfc3BsaXRfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgZGF0ZV9zcGxpdF9ieV9zcGFjZVszXTsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLm1vdmVfbnVtYmVyID09IDEpIHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0ZS5wdXNoKGRhdGVfc3BsaXQpOw0KICAgICAgICAgIHRoaXMuZGFuY2VTZXRBcnIucHVzaChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kYW5jZV9zZXQpOw0KICAgICAgICB9DQoNCiAgICAgICAgLy8gZ2V0IHRoZSBzdGFydCB0aW1lIG9mIHRoZSBkYW5jZSBzZXQgKGVhcmxpZXN0IHRpbWUgYW1vbmcgdGhlIDMgZGFuY2VycykNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX21vdmUgPT0gIlN0YXJ0Iikgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lICE9IG51bGwNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsICYmDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgIT0gbnVsbA0KICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQoNCiAgICAgICAgICBjb25zb2xlLmxvZygiU1RBUlQ6ICIgKyB0aGlzLnN0YXJ0VGltZSk7DQogICAgICAgICAgdmFyIHN0YXJ0VGltZV9zcGxpdCA9IHRoaXMuc3RhcnRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgaWYgKHN0YXJ0VGltZV9zcGxpdFswXSA9PSAiMjQiKSB7DQogICAgICAgICAgICBzdGFydFRpbWVfc3BsaXRbMF0gPT0gIjAwIjsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBzdGFydFRpbWVfc3BsaXRbMF0gKyAiOiIgKyBzdGFydFRpbWVfc3BsaXRbMV07DQogICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2VfbW92ZSA9PSAiRW5kIikgew0KICAgICAgICAgIC8vIGdldCB0aGUgZW5kIHRpbWUgb2YgdGhlIGRhbmNlIHNldCAobGF0ZXN0IHRpbWUgYW1vbmcgdGhlIDMgZGFuY2VycykNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgKSB7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICYmDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgIT0gbnVsbCAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAhPSBudWxsDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICE9IG51bGwgJiYNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsDQogICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lIDw9DQogICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgIT0gbnVsbCkgew0KICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSAhPSBudWxsKSB7DQogICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHZhciBlbmRUaW1lX3NwbGl0ID0gdGhpcy5lbmRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgaWYgKGVuZFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgZW5kVGltZV9zcGxpdFswXSA9PSAiMDAiOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBlbmRUaW1lX3NwbGl0WzBdICsgIjoiICsgZW5kVGltZV9zcGxpdFsxXTsNCiAgICAgICAgICB2YXIgdGltZU9mRGFuY2UgPSB0aGlzLnN0YXJ0VGltZSArICIgLSAiICsgdGhpcy5lbmRUaW1lOw0KICAgICAgICAgIHRoaXMuZGFuY2VUaW1lQXJyYXkucHVzaCh0aW1lT2ZEYW5jZSk7DQogICAgICAgIH0NCiAgICAgICAgdmFyIGRhbmNlQXJyID0gew0KICAgICAgICAgIGRhbmNlX3NldDogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2Vfc2V0LA0KICAgICAgICAgIG1vdmVfbnVtYmVyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5tb3ZlX251bWJlciwNCiAgICAgICAgICBkYXRlOiBkYXRlX3NwbGl0LA0KICAgICAgICAgIGRhbmNlX21vdmU6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX21vdmUsDQogICAgICAgICAgbGVmdF90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUsDQogICAgICAgICAgbGVmdF9kYW5jZXI6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfZGFuY2VyLA0KICAgICAgICAgIGNlbnRlcl90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSwNCiAgICAgICAgICBjZW50ZXJfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfZGFuY2VyLA0KICAgICAgICAgIHJpZ2h0X3RpbWU6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUsDQogICAgICAgICAgcmlnaHRfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF9kYW5jZXIsDQogICAgICAgICAgZGlmZjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGlmZmVyZW5jZSwNCiAgICAgICAgICBzeW5jOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5zeW5jLA0KICAgICAgICB9Ow0KICAgICAgICAvLyBwdXNoIHRoZSBkYXRhIGZvciBlYWNoIGRhbmNlIG1vdmUgaW4gdGhlIGRhbmNlcyBhcnJheQ0KICAgICAgICB0aGlzLmRhbmNlcy5wdXNoKGRhbmNlQXJyKTsNCiAgICAgIH0NCiAgICAgIHRoaXMucGllUmVzcG9uc2VMZW5ndGggPSByZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoOw0KICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLnBpZVJlc3BvbnNlTGVuZ3RoOyBrKyspIHsNCiAgICAgICAgLy8gZ2V0IHRoZSBkYXRlIGZvciBwaWUgZGF0YQ0KICAgICAgICB2YXIgcGllX2RhdGUgPSBuZXcgRGF0ZShyZXNwb25zZS5kYXRhLnBpZURhdGFba10uZGF0ZXMpOw0KICAgICAgICB2YXIgcGllX2RhdGVfc2d0ID0gcGllX2RhdGUudG9TdHJpbmcoKTsNCiAgICAgICAgdmFyIHBpZV9kYXRlX3NwbGl0X2J5X3NwYWNlID0gcGllX2RhdGVfc2d0LnNwbGl0KCIgIik7DQogICAgICAgIHZhciBwaWVfZGF0ZV9zcGxpdCA9DQogICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbM107DQogICAgICAgIHRoaXMucGllRGF0ZS5wdXNoKHBpZV9kYXRlX3NwbGl0KTsNCiAgICAgICAgdmFyIHBpZUFyciA9IHsNCiAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5kYW5jZV9zZXQsDQogICAgICAgICAgZGF0ZTogcGllX2RhdGVfc3BsaXQsDQogICAgICAgICAgeWVzX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS55ZXNfc3luYywNCiAgICAgICAgICBub19zeW5jOiByZXNwb25zZS5kYXRhLnBpZURhdGFba10ubm9fc3luYywNCiAgICAgICAgfTsNCiAgICAgICAgLy8gcHVzaCB0aGUgZGF0YSBmb3IgZWFjaCBkYW5jZSBzZXQgaW4gdGhlIHBpZSBhcnJheQ0KICAgICAgICB0aGlzLnBpZS5wdXNoKHBpZUFycik7DQogICAgICB9DQogICAgICB0aGlzLm51bU9mUmVjb3JkcyA9IHRoaXMuZGFuY2VTZXRBcnIubGVuZ3RoOw0KICAgIH0sDQogIH0sDQogIC8vIHVzZWQgdG8gc2VuZCBhbiBIVFRQIHJlcXVlc3QgdG8gZmV0Y2ggZGF0YSB0aGF0IHRoZSBjb21wb25lbnQgd2lsbCB0aGVuIHJlbmRlcg0KICBhc3luYyBtb3VudGVkKCkgew0KICAgIHRoaXMubG9hZGVkID0gZmFsc2U7DQogICAgY29uc29sZS5sb2coIkJlZm9yZTogIiArIHRoaXMubG9hZGVkKTsNCiAgICB0cnkgew0KICAgICAgYXdhaXQgdGhpcy5mZXRjaERhdGEoKTsNCiAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTsNCiAgICAgIGNvbnNvbGUubG9nKCJBZnRlcjogIiArIHRoaXMubG9hZGVkKTsNCiAgICB9IGNhdGNoIChlKSB7DQogICAgICBjb25zb2xlLmVycm9yKGUpOw0KICAgIH0NCiAgfSwNCn07DQo="},{"version":3,"sources":["PastDanceSets.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoNA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PastDanceSets.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container>\r\n    <div style=\"width: 20%; float: left\">\r\n      <psnd />\r\n    </div>\r\n    <div style=\"width: 80%; float: right\">\r\n      <v-row>\r\n        <v-col class=\"mx-auto\" md=\"3\">\r\n          <v-select\r\n            v-model=\"selectedChart\"\r\n            :items=\"chartType\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Chart Type\"\r\n            background-color=\"#A9D66E\"\r\n            prepend-icon=\"mdi-view-dashboard\"\r\n            clearable\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectChart\"\r\n            @click:clear=\"clearCharts\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\">\r\n          <v-select\r\n            v-model=\"search\"\r\n            :items=\"danceSetNum\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Dance Set(s)\"\r\n            background-color=\"#76D57C\"\r\n            prepend-icon=\"mdi-magnify\"\r\n            clearable\r\n            multiple\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectDanceSet\"\r\n            @click:clear=\"clearDanceSet\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\">\r\n          <v-select\r\n            v-model=\"selectedDancers\"\r\n            :items=\"dancers\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Dancer(s)\"\r\n            background-color=\"#00D19C\"\r\n            prepend-icon=\"mdi-account-multiple\"\r\n            clearable\r\n            multiple\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectDancers\"\r\n            @click:clear=\"clearDancers\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\" md=\"3\">\r\n          <v-menu\r\n            v-model=\"dateMenu\"\r\n            :nudge-right=\"40\"\r\n            :close-on-content-click=\"false\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            max-width=\"290px\"\r\n            min-width=\"290px\"\r\n          >\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-text-field\r\n                label=\"Choose Date(s)\"\r\n                :value=\"dateDisp\"\r\n                v-on=\"on\"\r\n                clearable\r\n                prepend-icon=\"mdi-calendar\"\r\n                background-color=\"#3DDBD8\"\r\n                filled\r\n                dense\r\n                color=\"#000000\"\r\n                @click:clear=\"clearDates\"\r\n              />\r\n            </template>\r\n            <v-date-picker\r\n              v-model=\"dateVal\"\r\n              @click:date=\"selectDates\"\r\n              :max=\"getEndDate\"\r\n              multiple\r\n            />\r\n          </v-menu>\r\n        </v-col>\r\n        <v-col class=\"mx-auto\" md=\"1\">\r\n          <v-btn icon color=\"green\" fab outlined @click=\"submit\">\r\n            <v-icon>mdi-check</v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <p>{{ numOfRecords }} result(s) found</p>\r\n      <!-- if page is loaded and there is table and pie chart data, display both -->\r\n      <template v-if=\"loaded && haveTable && havePie\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-row>\r\n            <v-card width=\"65%\">\r\n              <v-card-title>\r\n                Dance Set {{ number }}\r\n                <br />\r\n                {{ tableDate[i] }} {{ danceTimeArray[i] }}\r\n                <v-spacer></v-spacer>\r\n              </v-card-title>\r\n              <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"getDances(number)\"\r\n              ></v-data-table>\r\n            </v-card>\r\n            <v-spacer />\r\n            <v-card width=\"30%\">\r\n              <v-card-title>\r\n                Sync Dance Set {{ number }}\r\n                <br />\r\n                {{ pieDate[i] }}\r\n                <v-spacer></v-spacer>\r\n              </v-card-title>\r\n              <p style=\"font-size: 8px; color: grey; text-align: justify\">\r\n                *This pie chart shows the number of dance moves the dancers are\r\n                in sync for. Hover over the pink and blue in the pie chart to\r\n                view the percentages.\r\n              </p>\r\n              <PieChartStatic\r\n                :chartdata=\"getChartData(number)\"\r\n                :options=\"chartOptions\"\r\n              />\r\n            </v-card>\r\n          </v-row>\r\n        </v-list>\r\n      </template>\r\n      <!-- if page is loaded and there is table data but no pie chart data, display table only -->\r\n      <template v-else-if=\"loaded && haveTable && !havePie\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-card width=\"100%\">\r\n            <v-card-title>\r\n              Dance Set {{ number }}\r\n              <br />\r\n              {{ tableDate[i] }} {{ danceTimeArray[i] }}\r\n              <v-spacer></v-spacer>\r\n            </v-card-title>\r\n            <v-data-table\r\n              :headers=\"headersTableOnly\"\r\n              :items=\"getDancesTableOnly(number)\"\r\n            ></v-data-table>\r\n          </v-card>\r\n        </v-list>\r\n      </template>\r\n      <!-- if page is loaded and there is pie chart data but no table data, display pie chart -->\r\n      <template v-else-if=\"loaded && havePie && !haveTable\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-row>\r\n            <v-card width=\"49%\" class=\"mx-auto\">\r\n              <v-card-title>\r\n                Sync Dance Set {{ number }}\r\n                <br />\r\n                {{ pieDate[i] }}\r\n                <v-spacer />\r\n              </v-card-title>\r\n              <p style=\"font-size: 8px; color: grey; text-align: justify\">\r\n                *This pie chart shows the number of dance moves the dancers are\r\n                in sync for. Hover over the pink and blue in the pie chart to\r\n                view the percentages.\r\n              </p>\r\n              <PieChartStatic\r\n                :chartdata=\"getChartData(number)\"\r\n                :options=\"chartOptions\"\r\n              />\r\n            </v-card>\r\n          </v-row>\r\n        </v-list>\r\n      </template>\r\n      <!-- if page is loaded and there is no table and pie chart data, show no data available message -->\r\n      <template v-else-if=\"loaded && !haveTable && !havePie\">\r\n        <v-card\r\n          class=\"mx-auto\"\r\n          width=\"60%\"\r\n          height=\"160\"\r\n          color=\"#ECEFF1\"\r\n          rounded\r\n        >\r\n          <v-card-title>\r\n            <v-row align=\"center\" justify=\"center\">\r\n              <v-icon light large center>mdi-emoticon-sad</v-icon>\r\n            </v-row>\r\n          </v-card-title>\r\n          <p class=\"text-center\">\r\n            What you are looking for cannot be found.\r\n            <br />Sorry!\r\n          </p>\r\n        </v-card>\r\n      </template>\r\n      <template v-else>\r\n        <v-row justify=\"center\">\r\n          <v-progress-circular\r\n            indeterminate\r\n            :size=\"70\"\r\n            :width=\"7\"\r\n            color=\"#FF9800\"\r\n          />\r\n        </v-row>\r\n      </template>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport psnd from \"./PersistentSideNavDrawer\";\r\nimport Swal from \"sweetalert2\";\r\nimport PieChartStatic from \"./Charts/PieChartStatic\";\r\n\r\nexport default {\r\n  name: \"PastDanceSets\",\r\n\r\n  components: {\r\n    psnd,\r\n    PieChartStatic,\r\n  },\r\n  data: () => ({\r\n    numDanceSet: null,\r\n    search: null,\r\n    selectedChart: null,\r\n    selectedDancers: null,\r\n    chartType: [\r\n      { name: \"Dance Table\", value: \"Table\" },\r\n      { name: \"Sync Chart\", value: \"Pie\" },\r\n    ],\r\n    dancers: [\r\n      { name: \"Jingxuan\", value: \"Jingxuan\" },\r\n      { name: \"Karan\", value: \"Karan\" },\r\n      { name: \"Kexin\", value: \"Kexin\" },\r\n      { name: \"Sarah\", value: \"Sarah\" },\r\n      { name: \"Tristy\", value: \"Tristy\" },\r\n      { name: \"Yunhan\", value: \"Yunhan\" },\r\n    ],\r\n    headers: [\r\n      { text: \"No.\", value: \"move_number\" },\r\n      { text: \"Dance Move\", value: \"dance_move\" },\r\n      { text: \"Left Dancer\", value: \"left_dancer\" },\r\n      { text: \"Center Dancer\", value: \"center_dancer\" },\r\n      { text: \"Right Dancer\", value: \"right_dancer\" },\r\n      {\r\n        text: \"Sync Delay (seconds)\",\r\n        value: \"diff\",\r\n      },\r\n      {\r\n        text: \"In Sync?\",\r\n        value: \"sync\",\r\n      },\r\n    ],\r\n    headersTableOnly: [\r\n      { text: \"No.\", value: \"move_number\" },\r\n      { text: \"Dance Move\", value: \"dance_move\" },\r\n      { text: \"Time (Left)\", value: \"left_time\" },\r\n      { text: \"Left Dancer\", value: \"left_dancer\" },\r\n      { text: \"Time (Center)\", value: \"center_time\" },\r\n      { text: \"Center Dancer\", value: \"center_dancer\" },\r\n      { text: \"Time (Right)\", value: \"right_time\" },\r\n      { text: \"Right Dancer\", value: \"right_dancer\" },\r\n      {\r\n        text: \"Sync Delay (seconds)\",\r\n        value: \"diff\",\r\n      },\r\n      {\r\n        text: \"In Sync?\",\r\n        value: \"sync\",\r\n      },\r\n    ],\r\n    dances: [],\r\n    loaded: false,\r\n    danceSetNum: [],\r\n    dateMenu: false,\r\n    dateVal: null,\r\n    getEndDate: new Date().toISOString().substr(0, 10),\r\n    tableResponseLength: null,\r\n    pieResponseLength: null,\r\n    pie: [],\r\n    pieDate: [],\r\n    tableDate: [],\r\n    danceSetArr: [],\r\n    numOfRecords: null,\r\n    danceTimeArray: [],\r\n    startTime: null,\r\n    endTime: null,\r\n    havePie: true,\r\n    haveTable: true,\r\n    chartOptions: {\r\n      legend: {\r\n        display: true,\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: true,\r\n      plugins: {\r\n        datalabels: {\r\n          color: \"white\",\r\n          textAlign: \"center\",\r\n          font: {\r\n            weight: \"bold\",\r\n            size: 16,\r\n          },\r\n        },\r\n      },\r\n      tooltips: {\r\n        callbacks: {\r\n          label: function (tooltipItem, data) {\r\n            var allData = data.datasets[tooltipItem.datasetIndex].data;\r\n            var tooltipLabel = data.labels[tooltipItem.index];\r\n            var tooltipData = allData[tooltipItem.index];\r\n            var total = 0;\r\n            for (var i in allData) {\r\n              total += allData[i];\r\n            }\r\n            var tooltipPercentage = Math.round((tooltipData / total) * 100);\r\n            return (\r\n              tooltipLabel +\r\n              \": \" +\r\n              tooltipData +\r\n              \" (\" +\r\n              tooltipPercentage +\r\n              \"%)\"\r\n            );\r\n          },\r\n        },\r\n      },\r\n    },\r\n  }),\r\n  computed: {\r\n    dateDisp() {\r\n      return this.dateVal;\r\n    },\r\n  },\r\n  methods: {\r\n    clearCharts: function () {\r\n      this.selectedChart = null;\r\n    },\r\n    selectChart: function () {\r\n      if (this.selectedChart != null) {\r\n        if (this.selectedChart === \"Table\") {\r\n          console.log(\"get data from Dance\");\r\n        } else if (this.selectedChart === \"Pie\") {\r\n          console.log(\"get data from Sync\");\r\n        }\r\n      } else {\r\n        console.log(\"display all dancers\");\r\n      }\r\n    },\r\n    clearDanceSet: function () {\r\n      this.search = null;\r\n    },\r\n    selectDanceSet: function () {\r\n      if (this.search != null && this.search.length > 0) {\r\n        var length = this.search.length;\r\n        for (var k = 0; k < length; k++) {\r\n          console.log(this.search[k]);\r\n        }\r\n      } else {\r\n        this.search = null;\r\n      }\r\n    },\r\n    clearDancers: function () {\r\n      this.selectedDancers = null;\r\n    },\r\n    selectDancers: function () {\r\n      if (this.selectedDancers != null && this.selectedDancers.length > 0) {\r\n        var length = this.selectedDancers.length;\r\n        if (length > 3) {\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"Oops...\",\r\n            text: \"A maximum of 3 dancers are allowed!\",\r\n          });\r\n          this.selectedDancers.pop();\r\n        }\r\n        for (var i = 0; i < this.selectedDancers.length; i++) {\r\n          console.log(this.selectedDancers[i]);\r\n        }\r\n      } else {\r\n        this.selectedDancers = null;\r\n      }\r\n    },\r\n    clearDates: function () {\r\n      this.dateVal = null;\r\n    },\r\n    selectDates: function () {\r\n      if (this.dateVal != null) {\r\n        console.log(this.dateVal.length);\r\n        for (var j = 0; j < this.dateVal.length; j++) {\r\n          console.log(this.dateVal[j]);\r\n        }\r\n      } else {\r\n        console.log(\"display all dates\");\r\n      }\r\n    },\r\n    submit: function () {\r\n      // data in selectedDancers are to be taken as AND i.e. the dance sets must contain the dancer names\r\n      // data in dateVal is to be taken as OR\r\n      // data in search is to be taken as OR\r\n      // selectedChart refers to the DB Table (Table: Dance, Pie: Sync)\r\n      // SELECT * FROM Dance/Sync WHERE (dancerNames='%this.selectedDancers%') i.e. Pattern Matching\r\n      //  AND (this.dateVal) AND (this.search)\r\n\r\n      console.log(\"Dancers: \" + this.selectedDancers);\r\n      if (this.selectedDancers != null) {\r\n        this.selectedDancers = this.selectedDancers.sort();\r\n        var dancers = '\"';\r\n        for (var i = 0; i < this.selectedDancers.length; i++) {\r\n          dancers += this.selectedDancers[i] + \",\";\r\n        }\r\n        dancers = dancers.slice(0, -1);\r\n        dancers += '\"';\r\n      } else {\r\n        dancers = null;\r\n      }\r\n\r\n      if (this.dateVal != null) {\r\n        this.dateVal = this.dateVal.sort();\r\n        var dates = '\"';\r\n        for (var j = 0; j < this.dateVal.length; j++) {\r\n          dates += this.dateVal[j] + \",\";\r\n        }\r\n        dates = dates.slice(0, -1);\r\n        dates += '\"';\r\n      } else {\r\n        dates = null;\r\n      }\r\n\r\n      if (this.search != null) {\r\n        this.search = this.search.sort();\r\n        var searchDanceSets = '\"';\r\n        for (var k = 0; k < this.search.length; k++) {\r\n          searchDanceSets += this.search[k] + \",\";\r\n        }\r\n        searchDanceSets = searchDanceSets.slice(0, -1);\r\n        searchDanceSets += '\"';\r\n      } else {\r\n        searchDanceSets = null;\r\n      }\r\n\r\n      const pastDataToSend =\r\n        '{\"chart\":\"' +\r\n        this.selectedChart +\r\n        '\", ' +\r\n        '\"dancers\":' +\r\n        dancers +\r\n        ', \"dates\":' +\r\n        dates +\r\n        ', \"search\":' +\r\n        searchDanceSets +\r\n        \"}\";\r\n      // console.log(pastDataToSend);\r\n      var jsonPastDataToSend = JSON.parse(pastDataToSend);\r\n      console.log(\"Past Data To Send: \" + JSON.stringify(jsonPastDataToSend));\r\n\r\n      axios\r\n        .post(\"/dashboard/past-data\", {\r\n          pastData: jsonPastDataToSend,\r\n        })\r\n        .then((response) => {\r\n          this.dances = [];\r\n          this.tableDate = [];\r\n          this.danceSetArr = [];\r\n          this.pie = [];\r\n          this.pieDate = [];\r\n          this.danceTimeArray = [];\r\n\r\n          if (\r\n            response.data.tableData.length > 0 &&\r\n            (response.data.pieData.length == undefined ||\r\n              response.data.pieData.length == 0)\r\n          ) {\r\n            // if have table data but no pie chart data, then display only table\r\n            this.haveTable = true;\r\n            this.havePie = false;\r\n            this.tableResponseLength = response.data.tableData.length;\r\n\r\n            for (var j = 0; j < this.tableResponseLength; j++) {\r\n              var date_utc = new Date(response.data.tableData[j].dates);\r\n              var date_convert_to_sgt = date_utc.toString();\r\n              var split_sgt_date_by_space = date_convert_to_sgt.split(\" \");\r\n              var formatted_date =\r\n                split_sgt_date_by_space[2] +\r\n                \" \" +\r\n                split_sgt_date_by_space[1] +\r\n                \" \" +\r\n                split_sgt_date_by_space[3];\r\n              if (response.data.tableData[j].move_number == 1) {\r\n                this.tableDate.push(formatted_date);\r\n                this.danceSetArr.push(response.data.tableData[j].dance_set);\r\n              }\r\n              if (response.data.tableData[j].dance_move == \"Start\") {\r\n                if (\r\n                  response.data.tableData[j].left_time != null &&\r\n                  response.data.tableData[j].center_time != null &&\r\n                  response.data.tableData[j].right_time != null\r\n                ) {\r\n                  if (\r\n                    response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].center_time &&\r\n                    response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].right_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[j].left_time;\r\n                  } else if (\r\n                    response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].left_time &&\r\n                    response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].right_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[j].center_time;\r\n                  } else if (\r\n                    response.data.tableData[j].right_time <=\r\n                      response.data.tableData[j].left_time &&\r\n                    response.data.tableData[j].right_time <=\r\n                      response.data.tableData[j].center_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[j].right_time;\r\n                  }\r\n                } else {\r\n                  if (\r\n                    response.data.tableData[j].left_time != null &&\r\n                    response.data.tableData[j].center_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].center_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[j].left_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[j].center_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[j].left_time != null &&\r\n                    response.data.tableData[j].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].right_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[j].left_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[j].right_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[j].center_time != null &&\r\n                    response.data.tableData[j].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].right_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[j].center_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[j].right_time;\r\n                    }\r\n                  } else if (response.data.tableData[j].left_time != null) {\r\n                    this.startTime = response.data.tableData[j].left_time;\r\n                  } else if (response.data.tableData[j].center_time != null) {\r\n                    this.startTime = response.data.tableData[j].center_time;\r\n                  } else if (response.data.tableData[j].right_time != null) {\r\n                    this.startTime = response.data.tableData[j].right_time;\r\n                  }\r\n                }\r\n                var startTime_split = this.startTime.split(\":\");\r\n                if (startTime_split[0] == \"24\") {\r\n                  startTime_split[0] == \"00\";\r\n                }\r\n                this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n              } else if (response.data.tableData[j].dance_move == \"End\") {\r\n                if (\r\n                  response.data.tableData[j].left_time != null &&\r\n                  response.data.tableData[j].center_time != null &&\r\n                  response.data.tableData[j].right_time != null\r\n                ) {\r\n                  if (\r\n                    response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].center_time &&\r\n                    response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].right_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[j].left_time;\r\n                  } else if (\r\n                    response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].left_time &&\r\n                    response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].right_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[j].center_time;\r\n                  } else if (\r\n                    response.data.tableData[j].right_time <=\r\n                      response.data.tableData[j].left_time &&\r\n                    response.data.tableData[j].right_time <=\r\n                      response.data.tableData[j].center_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[j].right_time;\r\n                  }\r\n                } else {\r\n                  if (\r\n                    response.data.tableData[j].left_time != null &&\r\n                    response.data.tableData[j].center_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].center_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[j].left_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[j].center_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[j].left_time != null &&\r\n                    response.data.tableData[j].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].left_time <=\r\n                      response.data.tableData[j].right_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[j].left_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[j].right_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[j].center_time != null &&\r\n                    response.data.tableData[j].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[j].center_time <=\r\n                      response.data.tableData[j].right_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[j].center_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[j].right_time;\r\n                    }\r\n                  } else if (response.data.tableData[j].left_time != null) {\r\n                    this.endTime = response.data.tableData[j].left_time;\r\n                  } else if (response.data.tableData[j].center_time != null) {\r\n                    this.endTime = response.data.tableData[j].center_time;\r\n                  } else if (response.data.tableData[j].right_time != null) {\r\n                    this.endTime = response.data.tableData[j].right_time;\r\n                  }\r\n                }\r\n                var endTime_split = this.endTime.split(\":\");\r\n                if (endTime_split[0] == \"24\") {\r\n                  endTime_split[0] == \"00\";\r\n                }\r\n                this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n                var timeOfDance = this.startTime + \" - \" + this.endTime;\r\n                this.danceTimeArray.push(timeOfDance);\r\n              }\r\n\r\n              if (response.data.tableData[j].left_time == null) {\r\n                response.data.tableData[j].left_time = \"-\";\r\n              }\r\n\r\n              if (response.data.tableData[j].center_time == null) {\r\n                response.data.tableData[j].center_time = \"-\";\r\n              }\r\n\r\n              if (response.data.tableData[j].right_time == null) {\r\n                response.data.tableData[j].right_time = \"-\";\r\n              }\r\n\r\n              var danceArr = {\r\n                dance_set: response.data.tableData[j].dance_set,\r\n                move_number: response.data.tableData[j].move_number,\r\n                date: formatted_date,\r\n                dance_move: response.data.tableData[j].dance_move,\r\n                left_time: response.data.tableData[j].left_time,\r\n                left_dancer: response.data.tableData[j].left_dancer,\r\n                center_time: response.data.tableData[j].center_time,\r\n                center_dancer: response.data.tableData[j].center_dancer,\r\n                right_time: response.data.tableData[j].right_time,\r\n                right_dancer: response.data.tableData[j].right_dancer,\r\n                diff: response.data.tableData[j].difference,\r\n                sync: response.data.tableData[j].sync,\r\n              };\r\n              this.dances.push(danceArr);\r\n            }\r\n          } else if (\r\n            response.data.pieData.length > 0 &&\r\n            (response.data.tableData.length == undefined ||\r\n              response.data.tableData.length == 0)\r\n          ) {\r\n            // if have only pie chart data and no table data, then display only pie charts\r\n            this.havePie = true;\r\n            this.haveTable = false;\r\n            this.pieResponseLength = response.data.pieData.length;\r\n            for (var k = 0; k < this.pieResponseLength; k++) {\r\n              var pie_date = new Date(response.data.pieData[k].dates);\r\n              var pie_date_sgt = pie_date.toString();\r\n              var pie_date_split_by_space = pie_date_sgt.split(\" \");\r\n              var pie_date_split =\r\n                pie_date_split_by_space[2] +\r\n                \" \" +\r\n                pie_date_split_by_space[1] +\r\n                \" \" +\r\n                pie_date_split_by_space[3];\r\n              this.pieDate.push(pie_date_split);\r\n              this.danceSetArr.push(response.data.pieData[k].dance_set);\r\n              var pieArr = {\r\n                dance_set: response.data.pieData[k].dance_set,\r\n                date: pie_date_split,\r\n                yes_sync: response.data.pieData[k].yes_sync,\r\n                no_sync: response.data.pieData[k].no_sync,\r\n              };\r\n              this.pie.push(pieArr);\r\n            }\r\n            // console.log(this.pie);\r\n          } else if (\r\n            (response.data.pieData.length == undefined &&\r\n              response.data.tableData.length == undefined) ||\r\n            (response.data.pieData.length == 0 &&\r\n              response.data.tableData.length == 0)\r\n          ) {\r\n            // if not table and no pie chart data, then set haveTable and havePie to false\r\n            // to display no data available message\r\n            this.haveTable = false;\r\n            this.havePie = false;\r\n          } else {\r\n            // if have both table and pie chart data, then display both\r\n            this.haveTable = true;\r\n            this.havePie = true;\r\n            this.tableResponseLength = response.data.tableData.length;\r\n            for (var m = 0; m < this.tableResponseLength; m++) {\r\n              var dates = new Date(response.data.tableData[m].dates);\r\n              var sgt_date = dates.toString();\r\n              var split_date_by_space = sgt_date.split(\" \");\r\n              var split_date =\r\n                split_date_by_space[2] +\r\n                \" \" +\r\n                split_date_by_space[1] +\r\n                \" \" +\r\n                split_date_by_space[3];\r\n              if (response.data.tableData[m].move_number == 1) {\r\n                this.tableDate.push(split_date);\r\n                this.danceSetArr.push(response.data.tableData[m].dance_set);\r\n              }\r\n              if (response.data.tableData[m].dance_move == \"Start\") {\r\n                if (\r\n                  response.data.tableData[m].left_time != null &&\r\n                  response.data.tableData[m].center_time != null &&\r\n                  response.data.tableData[m].right_time != null\r\n                ) {\r\n                  if (\r\n                    response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].center_time &&\r\n                    response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].right_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[m].left_time;\r\n                  } else if (\r\n                    response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].left_time &&\r\n                    response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].right_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[m].center_time;\r\n                  } else if (\r\n                    response.data.tableData[m].right_time <=\r\n                      response.data.tableData[m].left_time &&\r\n                    response.data.tableData[m].right_time <=\r\n                      response.data.tableData[m].center_time\r\n                  ) {\r\n                    this.startTime = response.data.tableData[m].right_time;\r\n                  }\r\n                } else {\r\n                  if (\r\n                    response.data.tableData[m].left_time != null &&\r\n                    response.data.tableData[m].center_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].center_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[m].left_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[m].center_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[m].left_time != null &&\r\n                    response.data.tableData[m].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].right_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[m].left_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[m].right_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[m].center_time != null &&\r\n                    response.data.tableData[m].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].right_time\r\n                    ) {\r\n                      this.startTime = response.data.tableData[m].center_time;\r\n                    } else {\r\n                      this.startTime = response.data.tableData[m].right_time;\r\n                    }\r\n                  } else if (response.data.tableData[m].left_time != null) {\r\n                    this.startTime = response.data.tableData[m].left_time;\r\n                  } else if (response.data.tableData[m].center_time != null) {\r\n                    this.startTime = response.data.tableData[m].center_time;\r\n                  } else if (response.data.tableData[m].right_time != null) {\r\n                    this.startTime = response.data.tableData[m].right_time;\r\n                  }\r\n                }\r\n                startTime_split = this.startTime.split(\":\");\r\n                if (startTime_split[0] == \"24\") {\r\n                  startTime_split[0] == \"00\";\r\n                }\r\n                this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n              } else if (response.data.tableData[m].dance_move == \"End\") {\r\n                if (\r\n                  response.data.tableData[m].left_time != null &&\r\n                  response.data.tableData[m].center_time != null &&\r\n                  response.data.tableData[m].right_time != null\r\n                ) {\r\n                  if (\r\n                    response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].center_time &&\r\n                    response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].right_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[m].left_time;\r\n                  } else if (\r\n                    response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].left_time &&\r\n                    response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].right_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[m].center_time;\r\n                  } else if (\r\n                    response.data.tableData[m].right_time <=\r\n                      response.data.tableData[m].left_time &&\r\n                    response.data.tableData[m].right_time <=\r\n                      response.data.tableData[m].center_time\r\n                  ) {\r\n                    this.endTime = response.data.tableData[m].right_time;\r\n                  }\r\n                } else {\r\n                  if (\r\n                    response.data.tableData[m].left_time != null &&\r\n                    response.data.tableData[m].center_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].center_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[m].left_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[m].center_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[m].left_time != null &&\r\n                    response.data.tableData[m].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].left_time <=\r\n                      response.data.tableData[m].right_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[m].left_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[m].right_time;\r\n                    }\r\n                  } else if (\r\n                    response.data.tableData[m].center_time != null &&\r\n                    response.data.tableData[m].right_time != null\r\n                  ) {\r\n                    if (\r\n                      response.data.tableData[m].center_time <=\r\n                      response.data.tableData[m].right_time\r\n                    ) {\r\n                      this.endTime = response.data.tableData[m].center_time;\r\n                    } else {\r\n                      this.endTime = response.data.tableData[m].right_time;\r\n                    }\r\n                  } else if (response.data.tableData[m].left_time != null) {\r\n                    this.endTime = response.data.tableData[m].left_time;\r\n                  } else if (response.data.tableData[m].center_time != null) {\r\n                    this.endTime = response.data.tableData[m].center_time;\r\n                  } else if (response.data.tableData[m].right_time != null) {\r\n                    this.endTime = response.data.tableData[m].right_time;\r\n                  }\r\n                }\r\n                endTime_split = this.endTime.split(\":\");\r\n                if (endTime_split[0] == \"24\") {\r\n                  endTime_split[0] == \"00\";\r\n                }\r\n                this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n                timeOfDance = this.startTime + \" - \" + this.endTime;\r\n                this.danceTimeArray.push(timeOfDance);\r\n              }\r\n\r\n              if (response.data.tableData[m].left_time == null) {\r\n                response.data.tableData[m].left_time = \"-\";\r\n              }\r\n\r\n              if (response.data.tableData[m].center_time == null) {\r\n                response.data.tableData[m].center_time = \"-\";\r\n              }\r\n\r\n              if (response.data.tableData[m].right_time == null) {\r\n                response.data.tableData[m].right_time = \"-\";\r\n              }\r\n              var danceArray = {\r\n                dance_set: response.data.tableData[m].dance_set,\r\n                move_number: response.data.tableData[m].move_number,\r\n                date: split_date,\r\n                dance_move: response.data.tableData[m].dance_move,\r\n                left_time: response.data.tableData[m].left_time,\r\n                left_dancer: response.data.tableData[m].left_dancer,\r\n                center_time: response.data.tableData[m].center_time,\r\n                center_dancer: response.data.tableData[m].center_dancer,\r\n                right_time: response.data.tableData[m].right_time,\r\n                right_dancer: response.data.tableData[m].right_dancer,\r\n                diff: response.data.tableData[m].difference,\r\n                sync: response.data.tableData[m].sync,\r\n              };\r\n              this.dances.push(danceArray);\r\n            }\r\n            this.pieResponseLength = response.data.pieData.length;\r\n            for (var n = 0; n < this.pieResponseLength; n++) {\r\n              var date_pie = new Date(response.data.pieData[n].dates);\r\n              var date_pie_sgt = date_pie.toString();\r\n              var date_pie_split_by_space = date_pie_sgt.split(\" \");\r\n              var date_pie_split =\r\n                date_pie_split_by_space[2] +\r\n                \" \" +\r\n                date_pie_split_by_space[1] +\r\n                \" \" +\r\n                date_pie_split_by_space[3];\r\n              this.pieDate.push(date_pie_split);\r\n              var pieArray = {\r\n                dance_set: response.data.pieData[n].dance_set,\r\n                date: date_pie_split,\r\n                yes_sync: response.data.pieData[n].yes_sync,\r\n                no_sync: response.data.pieData[n].no_sync,\r\n              };\r\n              this.pie.push(pieArray);\r\n            }\r\n          }\r\n          this.numOfRecords = this.danceSetArr.length;\r\n        });\r\n    },\r\n    getChartData: function (set_number) {\r\n      // get the data for pie chart for each dance set\r\n      for (let m = 0; m < this.pieResponseLength; m++) {\r\n        if (this.pie[m].dance_set == set_number) {\r\n          let yes = this.pie[m].yes_sync;\r\n          let no = this.pie[m].no_sync;\r\n          // console.log(\"Number: \" + set_number);\r\n          // console.log(\"Yes: \" + yes + \", No: \" + no);\r\n          let pieChartArray = {\r\n            labels: [\"Yes\", \"No\"],\r\n            datasets: [\r\n              {\r\n                borderWidth: 1,\r\n                borderColor: [\"rgba(245, 66, 158, 1)\", \"rgba(66, 194, 245, 1)\"],\r\n                backgroundColor: [\r\n                  \"rgba(245, 66, 158, 1)\",\r\n                  \"rgba(66, 194, 245, 1)\",\r\n                ],\r\n                data: [yes, no],\r\n              },\r\n            ],\r\n          };\r\n          // console.log(pieChartArray);\r\n          return pieChartArray;\r\n        }\r\n      }\r\n    },\r\n    getDances: function (set_number) {\r\n      // if the chart type is not specified then get\r\n      // move number, date, dance move, dancers in the 3 positions, difference in timing\r\n      // between fastest and slowest dancer and whether the dancers are in sync\r\n      // or not for each dance move\r\n      var danceDataArray = [];\r\n      for (var j = 0; j < this.tableResponseLength; j++) {\r\n        if (this.dances[j].dance_set == set_number) {\r\n          var danceData = {\r\n            move_number: this.dances[j].move_number,\r\n            date: this.dances[j].date,\r\n            dance_move: this.dances[j].dance_move,\r\n            left_dancer: this.dances[j].left_dancer,\r\n            center_dancer: this.dances[j].center_dancer,\r\n            right_dancer: this.dances[j].right_dancer,\r\n            diff: this.dances[j].diff,\r\n            sync: this.dances[j].sync,\r\n          };\r\n          danceDataArray.push(danceData);\r\n        }\r\n      }\r\n      return danceDataArray;\r\n    },\r\n    getDancesTableOnly: function (set_number) {\r\n      // if the chart type is specified to be table only then display additional information\r\n      // time of each dancer for each move for the dance sets\r\n      var danceDataArray = [];\r\n      for (var j = 0; j < this.tableResponseLength; j++) {\r\n        if (this.dances[j].dance_set == set_number) {\r\n          if (this.dances[j].left_time == null) {\r\n            this.dances[j].left_time = \"-\";\r\n          }\r\n\r\n          if (this.dances[j].center_time == null) {\r\n            this.dances[j].center_time = \"-\";\r\n          }\r\n\r\n          if (this.dances[j].right_time == null) {\r\n            this.dances[j].right_time = \"-\";\r\n          }\r\n\r\n          var danceData = {\r\n            move_number: this.dances[j].move_number,\r\n            date: this.dances[j].date,\r\n            dance_move: this.dances[j].dance_move,\r\n            left_time: this.dances[j].left_time,\r\n            left_dancer: this.dances[j].left_dancer,\r\n            center_time: this.dances[j].center_time,\r\n            center_dancer: this.dances[j].center_dancer,\r\n            right_time: this.dances[j].right_time,\r\n            right_dancer: this.dances[j].right_dancer,\r\n            diff: this.dances[j].diff,\r\n            sync: this.dances[j].sync,\r\n          };\r\n          danceDataArray.push(danceData);\r\n        }\r\n      }\r\n      return danceDataArray;\r\n    },\r\n    fetchData: async function () {\r\n      // get all past dance sets data\r\n      const response = await axios.get(\"/dashboard/past-data\");\r\n      this.numDanceSet = response.data.tableData[0].dance_set;\r\n      // this loop is used to set the options users can select for the specific dance sets to view\r\n      // in Dance Set(s) dropdown\r\n      for (var i = 1; i <= this.numDanceSet; i++) {\r\n        var arr = {\r\n          name: i,\r\n          value: i,\r\n        };\r\n        this.danceSetNum.push(arr);\r\n      }\r\n      this.tableResponseLength = response.data.tableData.length;\r\n      for (var j = 0; j < this.tableResponseLength; j++) {\r\n        // get the date of the move\r\n        var date = new Date(response.data.tableData[j].dates);\r\n        var date_sgt = date.toString();\r\n        var date_split_by_space = date_sgt.split(\" \");\r\n        var date_split =\r\n          date_split_by_space[2] +\r\n          \" \" +\r\n          date_split_by_space[1] +\r\n          \" \" +\r\n          date_split_by_space[3];\r\n        if (response.data.tableData[j].move_number == 1) {\r\n          this.tableDate.push(date_split);\r\n          this.danceSetArr.push(response.data.tableData[j].dance_set);\r\n        }\r\n\r\n        // get the start time of the dance set (earliest time among the 3 dancers)\r\n        if (response.data.tableData[j].dance_move == \"Start\") {\r\n          if (\r\n            response.data.tableData[j].left_time != null &&\r\n            response.data.tableData[j].center_time != null &&\r\n            response.data.tableData[j].right_time != null\r\n          ) {\r\n            if (\r\n              response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].center_time &&\r\n              response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].right_time\r\n            ) {\r\n              this.startTime = response.data.tableData[j].left_time;\r\n            } else if (\r\n              response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].left_time &&\r\n              response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].right_time\r\n            ) {\r\n              this.startTime = response.data.tableData[j].center_time;\r\n            } else if (\r\n              response.data.tableData[j].right_time <=\r\n                response.data.tableData[j].left_time &&\r\n              response.data.tableData[j].right_time <=\r\n                response.data.tableData[j].center_time\r\n            ) {\r\n              this.startTime = response.data.tableData[j].right_time;\r\n            }\r\n          } else {\r\n            if (\r\n              response.data.tableData[j].left_time != null &&\r\n              response.data.tableData[j].center_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].center_time\r\n              ) {\r\n                this.startTime = response.data.tableData[j].left_time;\r\n              } else {\r\n                this.startTime = response.data.tableData[j].center_time;\r\n              }\r\n            } else if (\r\n              response.data.tableData[j].left_time != null &&\r\n              response.data.tableData[j].right_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].right_time\r\n              ) {\r\n                this.startTime = response.data.tableData[j].left_time;\r\n              } else {\r\n                this.startTime = response.data.tableData[j].right_time;\r\n              }\r\n            } else if (\r\n              response.data.tableData[j].center_time != null &&\r\n              response.data.tableData[j].right_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].right_time\r\n              ) {\r\n                this.startTime = response.data.tableData[j].center_time;\r\n              } else {\r\n                this.startTime = response.data.tableData[j].right_time;\r\n              }\r\n            } else if (response.data.tableData[j].left_time != null) {\r\n              this.startTime = response.data.tableData[j].left_time;\r\n            } else if (response.data.tableData[j].center_time != null) {\r\n              this.startTime = response.data.tableData[j].center_time;\r\n            } else if (response.data.tableData[j].right_time != null) {\r\n              this.startTime = response.data.tableData[j].right_time;\r\n            }\r\n          }\r\n\r\n          console.log(\"START: \" + this.startTime);\r\n          var startTime_split = this.startTime.split(\":\");\r\n          if (startTime_split[0] == \"24\") {\r\n            startTime_split[0] == \"00\";\r\n          }\r\n          this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n        } else if (response.data.tableData[j].dance_move == \"End\") {\r\n          // get the end time of the dance set (latest time among the 3 dancers)\r\n          if (\r\n            response.data.tableData[j].left_time != null &&\r\n            response.data.tableData[j].center_time != null &&\r\n            response.data.tableData[j].right_time != null\r\n          ) {\r\n            if (\r\n              response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].center_time &&\r\n              response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].right_time\r\n            ) {\r\n              this.endTime = response.data.tableData[j].left_time;\r\n            } else if (\r\n              response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].left_time &&\r\n              response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].right_time\r\n            ) {\r\n              this.endTime = response.data.tableData[j].center_time;\r\n            } else if (\r\n              response.data.tableData[j].right_time <=\r\n                response.data.tableData[j].left_time &&\r\n              response.data.tableData[j].right_time <=\r\n                response.data.tableData[j].center_time\r\n            ) {\r\n              this.endTime = response.data.tableData[j].right_time;\r\n            }\r\n          } else {\r\n            if (\r\n              response.data.tableData[j].left_time != null &&\r\n              response.data.tableData[j].center_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].center_time\r\n              ) {\r\n                this.endTime = response.data.tableData[j].left_time;\r\n              } else {\r\n                this.endTime = response.data.tableData[j].center_time;\r\n              }\r\n            } else if (\r\n              response.data.tableData[j].left_time != null &&\r\n              response.data.tableData[j].right_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].left_time <=\r\n                response.data.tableData[j].right_time\r\n              ) {\r\n                this.endTime = response.data.tableData[j].left_time;\r\n              } else {\r\n                this.endTime = response.data.tableData[j].right_time;\r\n              }\r\n            } else if (\r\n              response.data.tableData[j].center_time != null &&\r\n              response.data.tableData[j].right_time != null\r\n            ) {\r\n              if (\r\n                response.data.tableData[j].center_time <=\r\n                response.data.tableData[j].right_time\r\n              ) {\r\n                this.endTime = response.data.tableData[j].center_time;\r\n              } else {\r\n                this.endTime = response.data.tableData[j].right_time;\r\n              }\r\n            } else if (response.data.tableData[j].left_time != null) {\r\n              this.endTime = response.data.tableData[j].left_time;\r\n            } else if (response.data.tableData[j].center_time != null) {\r\n              this.endTime = response.data.tableData[j].center_time;\r\n            } else if (response.data.tableData[j].right_time != null) {\r\n              this.endTime = response.data.tableData[j].right_time;\r\n            }\r\n          }\r\n          var endTime_split = this.endTime.split(\":\");\r\n          if (endTime_split[0] == \"24\") {\r\n            endTime_split[0] == \"00\";\r\n          }\r\n          this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n          var timeOfDance = this.startTime + \" - \" + this.endTime;\r\n          this.danceTimeArray.push(timeOfDance);\r\n        }\r\n        var danceArr = {\r\n          dance_set: response.data.tableData[j].dance_set,\r\n          move_number: response.data.tableData[j].move_number,\r\n          date: date_split,\r\n          dance_move: response.data.tableData[j].dance_move,\r\n          left_time: response.data.tableData[j].left_time,\r\n          left_dancer: response.data.tableData[j].left_dancer,\r\n          center_time: response.data.tableData[j].center_time,\r\n          center_dancer: response.data.tableData[j].center_dancer,\r\n          right_time: response.data.tableData[j].right_time,\r\n          right_dancer: response.data.tableData[j].right_dancer,\r\n          diff: response.data.tableData[j].difference,\r\n          sync: response.data.tableData[j].sync,\r\n        };\r\n        // push the data for each dance move in the dances array\r\n        this.dances.push(danceArr);\r\n      }\r\n      this.pieResponseLength = response.data.pieData.length;\r\n      for (var k = 0; k < this.pieResponseLength; k++) {\r\n        // get the date for pie data\r\n        var pie_date = new Date(response.data.pieData[k].dates);\r\n        var pie_date_sgt = pie_date.toString();\r\n        var pie_date_split_by_space = pie_date_sgt.split(\" \");\r\n        var pie_date_split =\r\n          pie_date_split_by_space[2] +\r\n          \" \" +\r\n          pie_date_split_by_space[1] +\r\n          \" \" +\r\n          pie_date_split_by_space[3];\r\n        this.pieDate.push(pie_date_split);\r\n        var pieArr = {\r\n          dance_set: response.data.pieData[k].dance_set,\r\n          date: pie_date_split,\r\n          yes_sync: response.data.pieData[k].yes_sync,\r\n          no_sync: response.data.pieData[k].no_sync,\r\n        };\r\n        // push the data for each dance set in the pie array\r\n        this.pie.push(pieArr);\r\n      }\r\n      this.numOfRecords = this.danceSetArr.length;\r\n    },\r\n  },\r\n  // used to send an HTTP request to fetch data that the component will then render\r\n  async mounted() {\r\n    this.loaded = false;\r\n    console.log(\"Before: \" + this.loaded);\r\n    try {\r\n      await this.fetchData();\r\n      this.loaded = true;\r\n      console.log(\"After: \" + this.loaded);\r\n    } catch (e) {\r\n      console.error(e);\r\n    }\r\n  },\r\n};\r\n</script>\r\n"]}]}