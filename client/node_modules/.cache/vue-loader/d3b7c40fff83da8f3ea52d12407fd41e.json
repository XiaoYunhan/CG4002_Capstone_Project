{"remainingRequest":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\src\\components\\PastData.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\src\\components\\PastData.vue","mtime":1600777532972},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\NUS\\Year 4\\Sem 1\\CG4002\\Dashboard\\dancedashboard\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IHBzbmQgZnJvbSAiLi9QZXJzaXN0ZW50U2lkZU5hdkRyYXdlciI7DQppbXBvcnQgU3dhbCBmcm9tICJzd2VldGFsZXJ0MiI7DQppbXBvcnQgUGllQ2hhcnRTdGF0aWMgZnJvbSAiLi9DaGFydHMvUGllQ2hhcnRTdGF0aWMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJQYXN0RGF0YSIsDQoNCiAgY29tcG9uZW50czogew0KICAgIHBzbmQsDQogICAgUGllQ2hhcnRTdGF0aWMsDQogIH0sDQogIGRhdGE6ICgpID0+ICh7DQogICAgbnVtRGFuY2VTZXQ6IG51bGwsDQogICAgc2VhcmNoOiBudWxsLA0KICAgIHNlbGVjdGVkQ2hhcnQ6IG51bGwsDQogICAgc2VsZWN0ZWREYW5jZXJzOiBudWxsLA0KICAgIGNoYXJ0VHlwZTogWw0KICAgICAgeyBuYW1lOiAiRGFuY2UgVGFibGUiLCB2YWx1ZTogIlRhYmxlIiB9LA0KICAgICAgeyBuYW1lOiAiU3luYyBDaGFydCIsIHZhbHVlOiAiUGllIiB9LA0KICAgIF0sDQogICAgZGFuY2VyczogWw0KICAgICAgeyBuYW1lOiAiSmluZ3h1YW4iLCB2YWx1ZTogIkppbmd4dWFuIiB9LA0KICAgICAgeyBuYW1lOiAiS2FyYW4iLCB2YWx1ZTogIkthcmFuIiB9LA0KICAgICAgeyBuYW1lOiAiS2V4aW4iLCB2YWx1ZTogIktleGluIiB9LA0KICAgICAgeyBuYW1lOiAiU2FyYWgiLCB2YWx1ZTogIlNhcmFoIiB9LA0KICAgICAgeyBuYW1lOiAiVHJpc3R5IiwgdmFsdWU6ICJUcmlzdHkiIH0sDQogICAgICB7IG5hbWU6ICJZdW5oYW4iLCB2YWx1ZTogIll1bmhhbiIgfSwNCiAgICBdLA0KICAgIGhlYWRlcnM6IFsNCiAgICAgIHsgdGV4dDogIk5vLiIsIHZhbHVlOiAibW92ZV9udW1iZXIiIH0sDQogICAgICB7IHRleHQ6ICJEYW5jZSBNb3ZlIiwgdmFsdWU6ICJkYW5jZV9tb3ZlIiB9LA0KICAgICAgLy8geyB0ZXh0OiAiVGltZSAoTGVmdCkiLCB2YWx1ZTogImxlZnRfdGltZSIgfSwNCiAgICAgIHsgdGV4dDogIkxlZnQgRGFuY2VyIiwgdmFsdWU6ICJsZWZ0X2RhbmNlciIgfSwNCiAgICAgIC8vIHsgdGV4dDogIlRpbWUgKENlbnRlcikiLCB2YWx1ZTogImNlbnRlcl90aW1lIiB9LA0KICAgICAgeyB0ZXh0OiAiQ2VudGVyIERhbmNlciIsIHZhbHVlOiAiY2VudGVyX2RhbmNlciIgfSwNCiAgICAgIC8vIHsgdGV4dDogIlRpbWUgKFJpZ2h0KSIsIHZhbHVlOiAicmlnaHRfdGltZSIgfSwNCiAgICAgIHsgdGV4dDogIlJpZ2h0IERhbmNlciIsIHZhbHVlOiAicmlnaHRfZGFuY2VyIiB9LA0KICAgICAgew0KICAgICAgICB0ZXh0OiAiU3luYyBEZWxheSAoc2Vjb25kcykiLA0KICAgICAgICB2YWx1ZTogImRpZmYiLA0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgdGV4dDogIkluIFN5bmM/IiwNCiAgICAgICAgdmFsdWU6ICJzeW5jIiwNCiAgICAgIH0sDQogICAgXSwNCiAgICBkYW5jZXM6IFtdLA0KICAgIGRhbmNlU2V0TnVtOiBbXSwNCiAgICBkYXRlTWVudTogZmFsc2UsDQogICAgZGF0ZVZhbDogbnVsbCwNCiAgICBnZXRFbmREYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKSwNCiAgICB0YWJsZVJlc3BvbnNlTGVuZ3RoOiBudWxsLA0KICAgIHBpZVJlc3BvbnNlTGVuZ3RoOiBudWxsLA0KICAgIHBpZTogW10sDQogICAgcGllRGF0ZTogW10sDQogICAgdGFibGVEYXRlOiBbXSwNCiAgICBkYW5jZVNldEFycjogW10sDQogICAgZGFuY2VUaW1lQXJyYXk6IFtdLA0KICAgIHN0YXJ0VGltZTogbnVsbCwNCiAgICBlbmRUaW1lOiBudWxsLA0KICAgIGhhdmVQaWU6IHRydWUsDQogICAgaGF2ZVRhYmxlOiB0cnVlLA0KICAgIGNoYXJ0T3B0aW9uczogew0KICAgICAgbGVnZW5kOiB7DQogICAgICAgIGRpc3BsYXk6IHRydWUsDQogICAgICB9LA0KICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSwNCiAgICAgIG1haW50YWluQXNwZWN0UmF0aW86IHRydWUsDQogICAgICB0b29sdGlwczogew0KICAgICAgICBjYWxsYmFja3M6IHsNCiAgICAgICAgICBsYWJlbDogZnVuY3Rpb24odG9vbHRpcEl0ZW0sIGRhdGEpIHsNCiAgICAgICAgICAgIHZhciBhbGxEYXRhID0gZGF0YS5kYXRhc2V0c1t0b29sdGlwSXRlbS5kYXRhc2V0SW5kZXhdLmRhdGE7DQogICAgICAgICAgICB2YXIgdG9vbHRpcExhYmVsID0gZGF0YS5sYWJlbHNbdG9vbHRpcEl0ZW0uaW5kZXhdOw0KICAgICAgICAgICAgdmFyIHRvb2x0aXBEYXRhID0gYWxsRGF0YVt0b29sdGlwSXRlbS5pbmRleF07DQogICAgICAgICAgICB2YXIgdG90YWwgPSAwOw0KICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBhbGxEYXRhKSB7DQogICAgICAgICAgICAgIHRvdGFsICs9IGFsbERhdGFbaV07DQogICAgICAgICAgICB9DQogICAgICAgICAgICB2YXIgdG9vbHRpcFBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKCh0b29sdGlwRGF0YSAvIHRvdGFsKSAqIDEwMCk7DQogICAgICAgICAgICByZXR1cm4gKA0KICAgICAgICAgICAgICB0b29sdGlwTGFiZWwgKw0KICAgICAgICAgICAgICAiOiAiICsNCiAgICAgICAgICAgICAgdG9vbHRpcERhdGEgKw0KICAgICAgICAgICAgICAiICgiICsNCiAgICAgICAgICAgICAgdG9vbHRpcFBlcmNlbnRhZ2UgKw0KICAgICAgICAgICAgICAiJSkiDQogICAgICAgICAgICApOw0KICAgICAgICAgIH0sDQogICAgICAgIH0sDQogICAgICB9LA0KICAgIH0sDQogIH0pLA0KICBjb21wdXRlZDogew0KICAgIGRhdGVEaXNwKCkgew0KICAgICAgcmV0dXJuIHRoaXMuZGF0ZVZhbDsNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2xlYXJDaGFydHM6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5zZWxlY3RlZENoYXJ0ID0gbnVsbDsNCiAgICB9LA0KICAgIHNlbGVjdENoYXJ0OiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2hhcnQgIT0gbnVsbCkgew0KICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENoYXJ0ID09PSAiVGFibGUiKSB7DQogICAgICAgICAgY29uc29sZS5sb2coImdldCBkYXRhIGZyb20gRGFuY2UiKTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkQ2hhcnQgPT09ICJQaWUiKSB7DQogICAgICAgICAgY29uc29sZS5sb2coImdldCBkYXRhIGZyb20gU3luYyIpOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiZGlzcGxheSBhbGwgZGFuY2VycyIpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xlYXJEYW5jZVNldDogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLnNlYXJjaCA9IG51bGw7DQogICAgfSwNCiAgICBzZWxlY3REYW5jZVNldDogZnVuY3Rpb24oKSB7DQogICAgICBpZiAodGhpcy5zZWFyY2ggIT0gbnVsbCAmJiB0aGlzLnNlYXJjaC5sZW5ndGggPiAwKSB7DQogICAgICAgIHZhciBsZW5ndGggPSB0aGlzLnNlYXJjaC5sZW5ndGg7DQogICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbGVuZ3RoOyBrKyspIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlYXJjaFtrXSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2VhcmNoID0gbnVsbDsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyRGFuY2VyczogZnVuY3Rpb24oKSB7DQogICAgICB0aGlzLnNlbGVjdGVkRGFuY2VycyA9IG51bGw7DQogICAgfSwNCiAgICBzZWxlY3REYW5jZXJzOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRGFuY2VycyAhPSBudWxsICYmIHRoaXMuc2VsZWN0ZWREYW5jZXJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMuc2VsZWN0ZWREYW5jZXJzLmxlbmd0aDsNCiAgICAgICAgaWYgKGxlbmd0aCA+IDMpIHsNCiAgICAgICAgICBTd2FsLmZpcmUoew0KICAgICAgICAgICAgaWNvbjogImVycm9yIiwNCiAgICAgICAgICAgIHRpdGxlOiAiT29wcy4uLiIsDQogICAgICAgICAgICB0ZXh0OiAiQSBtYXhpbXVtIG9mIDMgZGFuY2VycyBhcmUgYWxsb3dlZCEiLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYW5jZXJzLnBvcCgpOw0KICAgICAgICB9DQogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZERhbmNlcnMubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkRGFuY2Vyc1tpXSk7DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWREYW5jZXJzID0gbnVsbDsNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyRGF0ZXM6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy5kYXRlVmFsID0gbnVsbDsNCiAgICB9LA0KICAgIHNlbGVjdERhdGVzOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICh0aGlzLmRhdGVWYWwgIT0gbnVsbCkgew0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGVWYWwubGVuZ3RoKTsNCiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLmRhdGVWYWwubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGVWYWxbal0pOw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zb2xlLmxvZygiZGlzcGxheSBhbGwgZGF0ZXMiKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHN1Ym1pdDogZnVuY3Rpb24oKSB7DQogICAgICAvLyBkYXRhIGluIHNlbGVjdGVkRGFuY2VycyBhcmUgdG8gYmUgdGFrZW4gYXMgQU5EIGkuZS4gdGhlIGRhbmNlIHNldHMgbXVzdCBjb250YWluIHRoZSBkYW5jZXIgbmFtZXMNCiAgICAgIC8vIGRhdGEgaW4gZGF0ZVZhbCBpcyB0byBiZSB0YWtlbiBhcyBPUg0KICAgICAgLy8gZGF0YSBpbiBzZWFyY2ggaXMgdG8gYmUgdGFrZW4gYXMgT1INCiAgICAgIC8vIHNlbGVjdGVkQ2hhcnQgcmVmZXJzIHRvIHRoZSBEQiBUYWJsZSAoVGFibGU6IERhbmNlLCBQaWU6IFN5bmMpDQogICAgICAvLyBTRUxFQ1QgKiBGUk9NIERhbmNlL1N5bmMgV0hFUkUgKGRhbmNlck5hbWVzPScldGhpcy5zZWxlY3RlZERhbmNlcnNzJScpIGkuZS4gUGF0dGVybiBNYXRjaGluZw0KICAgICAgLy8gIEFORCAodGhpcy5kYXRlVmFsKSBBTkQgKHRoaXMuc2VhcmNoKQ0KDQogICAgICBjb25zb2xlLmxvZygiRGFuY2VyczogIiArIHRoaXMuc2VsZWN0ZWREYW5jZXJzKTsNCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkRGFuY2VycyAhPSBudWxsKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWREYW5jZXJzID0gdGhpcy5zZWxlY3RlZERhbmNlcnMuc29ydCgpOw0KICAgICAgICB2YXIgZGFuY2VycyA9ICciJzsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNlbGVjdGVkRGFuY2Vycy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGRhbmNlcnMgKz0gdGhpcy5zZWxlY3RlZERhbmNlcnNbaV0gKyAiLCI7DQogICAgICAgIH0NCiAgICAgICAgZGFuY2VycyA9IGRhbmNlcnMuc2xpY2UoMCwgLTEpOw0KICAgICAgICBkYW5jZXJzICs9ICciJzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGRhbmNlcnMgPSBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5kYXRlVmFsICE9IG51bGwpIHsNCiAgICAgICAgdGhpcy5kYXRlVmFsID0gdGhpcy5kYXRlVmFsLnNvcnQoKTsNCiAgICAgICAgdmFyIGRhdGVzID0gJyInOw0KICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuZGF0ZVZhbC5sZW5ndGg7IGorKykgew0KICAgICAgICAgIGRhdGVzICs9IHRoaXMuZGF0ZVZhbFtqXSArICIsIjsNCiAgICAgICAgfQ0KICAgICAgICBkYXRlcyA9IGRhdGVzLnNsaWNlKDAsIC0xKTsNCiAgICAgICAgZGF0ZXMgKz0gJyInOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZGF0ZXMgPSBudWxsOw0KICAgICAgfQ0KDQogICAgICBpZiAodGhpcy5zZWFyY2ggIT0gbnVsbCkgew0KICAgICAgICB0aGlzLnNlYXJjaCA9IHRoaXMuc2VhcmNoLnNvcnQoKTsNCiAgICAgICAgdmFyIHNlYXJjaERhbmNlU2V0cyA9ICciJzsNCiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCB0aGlzLnNlYXJjaC5sZW5ndGg7IGsrKykgew0KICAgICAgICAgIHNlYXJjaERhbmNlU2V0cyArPSB0aGlzLnNlYXJjaFtrXSArICIsIjsNCiAgICAgICAgfQ0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgPSBzZWFyY2hEYW5jZVNldHMuc2xpY2UoMCwgLTEpOw0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgKz0gJyInOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgc2VhcmNoRGFuY2VTZXRzID0gbnVsbDsNCiAgICAgIH0NCg0KICAgICAgY29uc3QgcGFzdERhdGFUb1NlbmQgPQ0KICAgICAgICAneyJjaGFydCI6IicgKw0KICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhcnQgKw0KICAgICAgICAnIiwgJyArDQogICAgICAgICciZGFuY2VycyI6JyArDQogICAgICAgIGRhbmNlcnMgKw0KICAgICAgICAnLCAiZGF0ZXMiOicgKw0KICAgICAgICBkYXRlcyArDQogICAgICAgICcsICJzZWFyY2giOicgKw0KICAgICAgICBzZWFyY2hEYW5jZVNldHMgKw0KICAgICAgICAifSI7DQogICAgICAvLyBjb25zb2xlLmxvZyhwYXN0RGF0YVRvU2VuZCk7DQogICAgICB2YXIganNvblBhc3REYXRhVG9TZW5kID0gSlNPTi5wYXJzZShwYXN0RGF0YVRvU2VuZCk7DQogICAgICBjb25zb2xlLmxvZygiUGFzdCBEYXRhIFRvIFNlbmQ6ICIgKyBKU09OLnN0cmluZ2lmeShqc29uUGFzdERhdGFUb1NlbmQpKTsNCg0KICAgICAgYXhpb3MNCiAgICAgICAgLnBvc3QoIi9kYXNoYm9hcmQvcGFzdC1kYXRhIiwgew0KICAgICAgICAgIHBhc3REYXRhOiBqc29uUGFzdERhdGFUb1NlbmQsDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOw0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhLmxlbmd0aCk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aCk7DQogICAgICAgICAgdGhpcy5kYW5jZXMgPSBbXTsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0ZSA9IFtdOw0KICAgICAgICAgIHRoaXMuZGFuY2VTZXRBcnIgPSBbXTsNCiAgICAgICAgICB0aGlzLnBpZSA9IFtdOw0KICAgICAgICAgIHRoaXMucGllRGF0ZSA9IFtdOw0KICAgICAgICAgIHRoaXMuZGFuY2VUaW1lQXJyYXkgPSBbXTsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPiAwICYmDQogICAgICAgICAgICAocmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aCA9PSB1bmRlZmluZWQgfHwNCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aCA9PSAwKQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdGhpcy5oYXZlVGFibGUgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5oYXZlUGllID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLnRhYmxlUmVzcG9uc2VMZW5ndGggPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGg7DQoNCiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfdXRjID0gbmV3IERhdGUocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGF0ZXMpOw0KICAgICAgICAgICAgICB2YXIgZGF0ZV9jb252ZXJ0X3RvX3NndCA9IGRhdGVfdXRjLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgIHZhciBzcGxpdF9zZ3RfZGF0ZV9ieV9zcGFjZSA9IGRhdGVfY29udmVydF90b19zZ3Quc3BsaXQoIiAiKTsNCiAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlZF9kYXRlID0NCiAgICAgICAgICAgICAgICBzcGxpdF9zZ3RfZGF0ZV9ieV9zcGFjZVsyXSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBzcGxpdF9zZ3RfZGF0ZV9ieV9zcGFjZVsxXSArDQogICAgICAgICAgICAgICAgIiAiICsNCiAgICAgICAgICAgICAgICBzcGxpdF9zZ3RfZGF0ZV9ieV9zcGFjZVszXTsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLm1vdmVfbnVtYmVyID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0ZS5wdXNoKGZvcm1hdHRlZF9kYXRlKTsNCiAgICAgICAgICAgICAgICB0aGlzLmRhbmNlU2V0QXJyLnB1c2gocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2Vfc2V0KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2VfbW92ZSA9PSAiU3RhcnQiKSB7DQogICAgICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdmFyIHN0YXJ0VGltZV9zcGxpdCA9IHRoaXMuc3RhcnRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZV9zcGxpdFswXSA9PSAiMjQiKSB7DQogICAgICAgICAgICAgICAgICBzdGFydFRpbWVfc3BsaXRbMF0gPT0gIjAwIjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBzdGFydFRpbWVfc3BsaXRbMF0gKyAiOiIgKyBzdGFydFRpbWVfc3BsaXRbMV07DQogICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2VfbW92ZSA9PSAiRW5kIikgew0KICAgICAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA+PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lID49DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPj0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA+PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZSA+PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPj0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUNCiAgICAgICAgICAgICAgICApIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuZW5kVGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHZhciBlbmRUaW1lX3NwbGl0ID0gdGhpcy5lbmRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgICAgICAgaWYgKGVuZFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgICAgICAgZW5kVGltZV9zcGxpdFswXSA9PSAiMDAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBlbmRUaW1lX3NwbGl0WzBdICsgIjoiICsgZW5kVGltZV9zcGxpdFsxXTsNCiAgICAgICAgICAgICAgICB2YXIgdGltZU9mRGFuY2UgPSB0aGlzLnN0YXJ0VGltZSArICIgLSAiICsgdGhpcy5lbmRUaW1lOw0KICAgICAgICAgICAgICAgIHRoaXMuZGFuY2VUaW1lQXJyYXkucHVzaCh0aW1lT2ZEYW5jZSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgdmFyIGRhbmNlQXJyID0gew0KICAgICAgICAgICAgICAgIGRhbmNlX3NldDogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGFuY2Vfc2V0LA0KICAgICAgICAgICAgICAgIG1vdmVfbnVtYmVyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5tb3ZlX251bWJlciwNCiAgICAgICAgICAgICAgICBkYXRlOiBmb3JtYXR0ZWRfZGF0ZSwNCiAgICAgICAgICAgICAgICBkYW5jZV9tb3ZlOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgICAgICAgIC8vIGxlZnRfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lLA0KICAgICAgICAgICAgICAgIGxlZnRfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X2RhbmNlciwNCiAgICAgICAgICAgICAgICAvLyBjZW50ZXJfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUsDQogICAgICAgICAgICAgICAgY2VudGVyX2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAgICAgICAvLyByaWdodF90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lLA0KICAgICAgICAgICAgICAgIHJpZ2h0X2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgICAgICAgIGRpZmY6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRpZmZlcmVuY2UsDQogICAgICAgICAgICAgICAgc3luYzogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uc3luYywNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdGhpcy5kYW5jZXMucHVzaChkYW5jZUFycik7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGggPiAwICYmDQogICAgICAgICAgICAocmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoID09IHVuZGVmaW5lZCB8fA0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPT0gMCkNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHRoaXMuaGF2ZVBpZSA9IHRydWU7DQogICAgICAgICAgICB0aGlzLmhhdmVUYWJsZSA9IGZhbHNlOw0KICAgICAgICAgICAgdGhpcy5waWVSZXNwb25zZUxlbmd0aCA9IHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGg7DQogICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMucGllUmVzcG9uc2VMZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICB2YXIgcGllX2RhdGUgPSBuZXcgRGF0ZShyZXNwb25zZS5kYXRhLnBpZURhdGFba10uZGF0ZXMpOw0KICAgICAgICAgICAgICB2YXIgcGllX2RhdGVfc2d0ID0gcGllX2RhdGUudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgdmFyIHBpZV9kYXRlX3NwbGl0X2J5X3NwYWNlID0gcGllX2RhdGVfc2d0LnNwbGl0KCIgIik7DQogICAgICAgICAgICAgIHZhciBwaWVfZGF0ZV9zcGxpdCA9DQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2VbM107DQogICAgICAgICAgICAgIHRoaXMucGllRGF0ZS5wdXNoKHBpZV9kYXRlX3NwbGl0KTsNCiAgICAgICAgICAgICAgdGhpcy5kYW5jZVNldEFyci5wdXNoKHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5kYW5jZV9zZXQpOw0KICAgICAgICAgICAgICB2YXIgcGllQXJyID0gew0KICAgICAgICAgICAgICAgIGRhbmNlX3NldDogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLmRhbmNlX3NldCwNCiAgICAgICAgICAgICAgICBkYXRlOiBwaWVfZGF0ZV9zcGxpdCwNCiAgICAgICAgICAgICAgICB5ZXNfc3luYzogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLnllc19zeW5jLA0KICAgICAgICAgICAgICAgIG5vX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5ub19zeW5jLA0KICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICB0aGlzLnBpZS5wdXNoKHBpZUFycik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBpZSk7DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIChyZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoID09IHVuZGVmaW5lZCAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPT0gdW5kZWZpbmVkKSB8fA0KICAgICAgICAgICAgKHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGggPT0gMCAmJg0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YS5sZW5ndGggPT0gMCkNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHRoaXMuaGF2ZVRhYmxlID0gZmFsc2U7DQogICAgICAgICAgICB0aGlzLmhhdmVQaWUgPSBmYWxzZTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy5oYXZlVGFibGUgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5oYXZlUGllID0gdHJ1ZTsNCiAgICAgICAgICAgIHRoaXMudGFibGVSZXNwb25zZUxlbmd0aCA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhLmxlbmd0aDsNCiAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoOyBtKyspIHsNCiAgICAgICAgICAgICAgdmFyIGRhdGVzID0gbmV3IERhdGUocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uZGF0ZXMpOw0KICAgICAgICAgICAgICB2YXIgc2d0X2RhdGUgPSBkYXRlcy50b1N0cmluZygpOw0KICAgICAgICAgICAgICB2YXIgc3BsaXRfZGF0ZV9ieV9zcGFjZSA9IHNndF9kYXRlLnNwbGl0KCIgIik7DQogICAgICAgICAgICAgIHZhciBzcGxpdF9kYXRlID0NCiAgICAgICAgICAgICAgICBzcGxpdF9kYXRlX2J5X3NwYWNlWzJdICsNCiAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgIHNwbGl0X2RhdGVfYnlfc3BhY2VbMV0gKw0KICAgICAgICAgICAgICAgICIgIiArDQogICAgICAgICAgICAgICAgc3BsaXRfZGF0ZV9ieV9zcGFjZVszXTsNCiAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLm1vdmVfbnVtYmVyID09IDEpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0ZS5wdXNoKHNwbGl0X2RhdGUpOw0KICAgICAgICAgICAgICAgIHRoaXMuZGFuY2VTZXRBcnIucHVzaChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYW5jZV9zZXQpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYW5jZV9tb3ZlID09ICJTdGFydCIpIHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKA0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPD0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lIDw9DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZSA8PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5jZW50ZXJfdGltZQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBzdGFydFRpbWVfc3BsaXQgPSB0aGlzLnN0YXJ0VGltZS5zcGxpdCgiOiIpOw0KICAgICAgICAgICAgICAgIGlmIChzdGFydFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lX3NwbGl0WzBdID09ICIwMCI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gc3RhcnRUaW1lX3NwbGl0WzBdICsgIjoiICsgc3RhcnRUaW1lX3NwbGl0WzFdOw0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRhbmNlX21vdmUgPT0gIkVuZCIpIHsNCiAgICAgICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWUgPj0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSA+PQ0KICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X3RpbWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lID49DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUgPj0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfdGltZQ0KICAgICAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWU7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLnJpZ2h0X3RpbWUgPj0NCiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lICYmDQogICAgICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lID49DQogICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmNlbnRlcl90aW1lDQogICAgICAgICAgICAgICAgKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBlbmRUaW1lX3NwbGl0ID0gdGhpcy5lbmRUaW1lLnNwbGl0KCI6Iik7DQogICAgICAgICAgICAgICAgaWYgKGVuZFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgICAgICAgZW5kVGltZV9zcGxpdFswXSA9PSAiMDAiOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSBlbmRUaW1lX3NwbGl0WzBdICsgIjoiICsgZW5kVGltZV9zcGxpdFsxXTsNCiAgICAgICAgICAgICAgICB0aW1lT2ZEYW5jZSA9IHRoaXMuc3RhcnRUaW1lICsgIiAtICIgKyB0aGlzLmVuZFRpbWU7DQogICAgICAgICAgICAgICAgdGhpcy5kYW5jZVRpbWVBcnJheS5wdXNoKHRpbWVPZkRhbmNlKTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB2YXIgZGFuY2VBcnJheSA9IHsNCiAgICAgICAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRhbmNlX3NldCwNCiAgICAgICAgICAgICAgICBtb3ZlX251bWJlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubW92ZV9udW1iZXIsDQogICAgICAgICAgICAgICAgZGF0ZTogc3BsaXRfZGF0ZSwNCiAgICAgICAgICAgICAgICBkYW5jZV9tb3ZlOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgICAgICAgIC8vIGxlZnRfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ubGVmdF90aW1lLA0KICAgICAgICAgICAgICAgIGxlZnRfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5sZWZ0X2RhbmNlciwNCiAgICAgICAgICAgICAgICAvLyBjZW50ZXJfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX3RpbWUsDQogICAgICAgICAgICAgICAgY2VudGVyX2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAgICAgICAvLyByaWdodF90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVttXS5yaWdodF90aW1lLA0KICAgICAgICAgICAgICAgIHJpZ2h0X2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgICAgICAgIGRpZmY6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW21dLmRpZmZlcmVuY2UsDQogICAgICAgICAgICAgICAgc3luYzogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbbV0uc3luYywNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdGhpcy5kYW5jZXMucHVzaChkYW5jZUFycmF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucGllUmVzcG9uc2VMZW5ndGggPSByZXNwb25zZS5kYXRhLnBpZURhdGEubGVuZ3RoOw0KICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCB0aGlzLnBpZVJlc3BvbnNlTGVuZ3RoOyBuKyspIHsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfcGllID0gbmV3IERhdGUocmVzcG9uc2UuZGF0YS5waWVEYXRhW25dLmRhdGVzKTsNCiAgICAgICAgICAgICAgdmFyIGRhdGVfcGllX3NndCA9IGRhdGVfcGllLnRvU3RyaW5nKCk7DQogICAgICAgICAgICAgIHZhciBkYXRlX3BpZV9zcGxpdF9ieV9zcGFjZSA9IGRhdGVfcGllX3NndC5zcGxpdCgiICIpOw0KICAgICAgICAgICAgICB2YXIgZGF0ZV9waWVfc3BsaXQgPQ0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzJdICsNCiAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzFdICsNCiAgICAgICAgICAgICAgICAiICIgKw0KICAgICAgICAgICAgICAgIGRhdGVfcGllX3NwbGl0X2J5X3NwYWNlWzNdOw0KICAgICAgICAgICAgICB0aGlzLnBpZURhdGUucHVzaChkYXRlX3BpZV9zcGxpdCk7DQogICAgICAgICAgICAgIHZhciBwaWVBcnJheSA9IHsNCiAgICAgICAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtuXS5kYW5jZV9zZXQsDQogICAgICAgICAgICAgICAgZGF0ZTogZGF0ZV9waWVfc3BsaXQsDQogICAgICAgICAgICAgICAgeWVzX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtuXS55ZXNfc3luYywNCiAgICAgICAgICAgICAgICBub19zeW5jOiByZXNwb25zZS5kYXRhLnBpZURhdGFbbl0ubm9fc3luYywNCiAgICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgdGhpcy5waWUucHVzaChwaWVBcnJheSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KDQogICAgICAgICAgLy8gY29uc29sZS5sb2coIkhhdmUgVGFibGU6ICIgKyB0aGlzLmhhdmVUYWJsZSk7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coIkhhdmUgUGllOiAiICsgdGhpcy5oYXZlUGllKTsNCiAgICAgICAgICBjb25zb2xlLmxvZygiRGFuY2UgU2V0czogIiArIHRoaXMuZGFuY2VTZXRBcnIpOw0KICAgICAgICAgIGNvbnNvbGUubG9nKCJQaWUgRGF0YTogIiArIEpTT04uc3RyaW5naWZ5KHRoaXMucGllKSk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgZ2V0Q2hhcnREYXRhOiBmdW5jdGlvbihzZXRfbnVtYmVyKSB7DQogICAgICBmb3IgKGxldCBtID0gMDsgbSA8IHRoaXMucGllUmVzcG9uc2VMZW5ndGg7IG0rKykgew0KICAgICAgICBpZiAodGhpcy5waWVbbV0uZGFuY2Vfc2V0ID09IHNldF9udW1iZXIpIHsNCiAgICAgICAgICBsZXQgeWVzID0gdGhpcy5waWVbbV0ueWVzX3N5bmM7DQogICAgICAgICAgbGV0IG5vID0gdGhpcy5waWVbbV0ubm9fc3luYzsNCiAgICAgICAgICBjb25zb2xlLmxvZygiTnVtYmVyOiAiICsgc2V0X251bWJlcik7DQogICAgICAgICAgY29uc29sZS5sb2coIlllczogIiArIHllcyArICIsIE5vOiAiICsgbm8pOw0KICAgICAgICAgIGxldCBwaWVDaGFydEFycmF5ID0gew0KICAgICAgICAgICAgbGFiZWxzOiBbIlllcyIsICJObyJdLA0KICAgICAgICAgICAgZGF0YXNldHM6IFsNCiAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAxLA0KICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiBbInJnYmEoMjQ1LCA2NiwgMTU4LCAxKSIsICJyZ2JhKDY2LCAxOTQsIDI0NSwgMSkiXSwNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFsNCiAgICAgICAgICAgICAgICAgICJyZ2JhKDI0NSwgNjYsIDE1OCwgMSkiLA0KICAgICAgICAgICAgICAgICAgInJnYmEoNjYsIDE5NCwgMjQ1LCAxKSIsDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgICBkYXRhOiBbeWVzLCBub10sDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICBdLA0KICAgICAgICAgIH07DQogICAgICAgICAgY29uc29sZS5sb2cocGllQ2hhcnRBcnJheSk7DQogICAgICAgICAgcmV0dXJuIHBpZUNoYXJ0QXJyYXk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGdldERhbmNlczogZnVuY3Rpb24oc2V0X251bWJlcikgew0KICAgICAgdmFyIGRhbmNlRGF0YUFycmF5ID0gW107DQogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMudGFibGVSZXNwb25zZUxlbmd0aDsgaisrKSB7DQogICAgICAgIGlmICh0aGlzLmRhbmNlc1tqXS5kYW5jZV9zZXQgPT0gc2V0X251bWJlcikgew0KICAgICAgICAgIHZhciBkYW5jZURhdGEgPSB7DQogICAgICAgICAgICBtb3ZlX251bWJlcjogdGhpcy5kYW5jZXNbal0ubW92ZV9udW1iZXIsDQogICAgICAgICAgICBkYXRlOiB0aGlzLmRhbmNlc1tqXS5kYXRlLA0KICAgICAgICAgICAgZGFuY2VfbW92ZTogdGhpcy5kYW5jZXNbal0uZGFuY2VfbW92ZSwNCiAgICAgICAgICAgIC8vIGxlZnRfdGltZTogdGhpcy5kYW5jZXNbal0ubGVmdF90aW1lLA0KICAgICAgICAgICAgbGVmdF9kYW5jZXI6IHRoaXMuZGFuY2VzW2pdLmxlZnRfZGFuY2VyLA0KICAgICAgICAgICAgLy8gY2VudGVyX3RpbWU6IHRoaXMuZGFuY2VzW2pdLmNlbnRlcl90aW1lLA0KICAgICAgICAgICAgY2VudGVyX2RhbmNlcjogdGhpcy5kYW5jZXNbal0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAgIC8vIHJpZ2h0X3RpbWU6IHRoaXMuZGFuY2VzW2pdLnJpZ2h0X3RpbWUsDQogICAgICAgICAgICByaWdodF9kYW5jZXI6IHRoaXMuZGFuY2VzW2pdLnJpZ2h0X2RhbmNlciwNCiAgICAgICAgICAgIGRpZmY6IHRoaXMuZGFuY2VzW2pdLmRpZmYsDQogICAgICAgICAgICBzeW5jOiB0aGlzLmRhbmNlc1tqXS5zeW5jLA0KICAgICAgICAgIH07DQogICAgICAgICAgZGFuY2VEYXRhQXJyYXkucHVzaChkYW5jZURhdGEpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gZGFuY2VEYXRhQXJyYXk7DQogICAgfSwNCiAgICBmZXRjaERhdGE6IGFzeW5jIGZ1bmN0aW9uKCkgew0KICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoIi9kYXNoYm9hcmQvcGFzdC1kYXRhIik7DQogICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnBpZURhdGEpOw0KICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS50YWJsZURhdGEpOw0KICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEucGllRGF0YS5sZW5ndGgpOw0KICAgICAgdGhpcy5udW1EYW5jZVNldCA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhWzBdLmRhbmNlX3NldDsNCiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHRoaXMubnVtRGFuY2VTZXQ7IGkrKykgew0KICAgICAgICB2YXIgYXJyID0gew0KICAgICAgICAgIG5hbWU6IGksDQogICAgICAgICAgdmFsdWU6IGksDQogICAgICAgIH07DQogICAgICAgIHRoaXMuZGFuY2VTZXROdW0ucHVzaChhcnIpOw0KICAgICAgfQ0KICAgICAgdGhpcy50YWJsZVJlc3BvbnNlTGVuZ3RoID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGEubGVuZ3RoOw0KICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLnRhYmxlUmVzcG9uc2VMZW5ndGg7IGorKykgew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kYXRlcyk7DQogICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUocmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uZGF0ZXMpOw0KICAgICAgICB2YXIgZGF0ZV9zZ3QgPSBkYXRlLnRvU3RyaW5nKCk7DQogICAgICAgIHZhciBkYXRlX3NwbGl0X2J5X3NwYWNlID0gZGF0ZV9zZ3Quc3BsaXQoIiAiKTsNCiAgICAgICAgdmFyIGRhdGVfc3BsaXQgPQ0KICAgICAgICAgIGRhdGVfc3BsaXRfYnlfc3BhY2VbMl0gKw0KICAgICAgICAgICIgIiArDQogICAgICAgICAgZGF0ZV9zcGxpdF9ieV9zcGFjZVsxXSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBkYXRlX3NwbGl0X2J5X3NwYWNlWzNdOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRlX3NwbGl0KTsNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLm1vdmVfbnVtYmVyID09IDEpIHsNCiAgICAgICAgICB0aGlzLnRhYmxlRGF0ZS5wdXNoKGRhdGVfc3BsaXQpOw0KICAgICAgICAgIHRoaXMuZGFuY2VTZXRBcnIucHVzaChyZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kYW5jZV9zZXQpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX21vdmUgPT0gIlN0YXJ0Iikgew0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA8PQ0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSAmJg0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lIDw9DQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lOw0KICAgICAgICAgIH0gZWxzZSBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5jZW50ZXJfdGltZSA8PQ0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgJiYNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lIDw9DQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUNCiAgICAgICAgICApIHsNCiAgICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWU7DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPD0NCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICYmDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lIDw9DQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLnN0YXJ0VGltZSA9IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWU7DQogICAgICAgICAgfQ0KICAgICAgICAgIHZhciBzdGFydFRpbWVfc3BsaXQgPSB0aGlzLnN0YXJ0VGltZS5zcGxpdCgiOiIpOw0KICAgICAgICAgIGlmIChzdGFydFRpbWVfc3BsaXRbMF0gPT0gIjI0Iikgew0KICAgICAgICAgICAgc3RhcnRUaW1lX3NwbGl0WzBdID09ICIwMCI7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuc3RhcnRUaW1lID0gc3RhcnRUaW1lX3NwbGl0WzBdICsgIjoiICsgc3RhcnRUaW1lX3NwbGl0WzFdOw0KICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX21vdmUgPT0gIkVuZCIpIHsNCiAgICAgICAgICBpZiAoDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWUgPj0NCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgJiYNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSA+PQ0KICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X3RpbWU7DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lID49DQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmxlZnRfdGltZSAmJg0KICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUgPj0NCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfdGltZQ0KICAgICAgICAgICkgew0KICAgICAgICAgICAgdGhpcy5lbmRUaW1lID0gcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWU7DQogICAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLnJpZ2h0X3RpbWUgPj0NCiAgICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lICYmDQogICAgICAgICAgICByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lID49DQogICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmNlbnRlcl90aW1lDQogICAgICAgICAgKSB7DQogICAgICAgICAgICB0aGlzLmVuZFRpbWUgPSByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lOw0KICAgICAgICAgIH0NCiAgICAgICAgICB2YXIgZW5kVGltZV9zcGxpdCA9IHRoaXMuZW5kVGltZS5zcGxpdCgiOiIpOw0KICAgICAgICAgIGlmIChlbmRUaW1lX3NwbGl0WzBdID09ICIyNCIpIHsNCiAgICAgICAgICAgIGVuZFRpbWVfc3BsaXRbMF0gPT0gIjAwIjsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5lbmRUaW1lID0gZW5kVGltZV9zcGxpdFswXSArICI6IiArIGVuZFRpbWVfc3BsaXRbMV07DQogICAgICAgICAgdmFyIHRpbWVPZkRhbmNlID0gdGhpcy5zdGFydFRpbWUgKyAiIC0gIiArIHRoaXMuZW5kVGltZTsNCiAgICAgICAgICB0aGlzLmRhbmNlVGltZUFycmF5LnB1c2godGltZU9mRGFuY2UpOw0KICAgICAgICB9DQogICAgICAgIHZhciBkYW5jZUFyciA9IHsNCiAgICAgICAgICBkYW5jZV9zZXQ6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRhbmNlX3NldCwNCiAgICAgICAgICBtb3ZlX251bWJlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubW92ZV9udW1iZXIsDQogICAgICAgICAgZGF0ZTogZGF0ZV9zcGxpdCwNCiAgICAgICAgICBkYW5jZV9tb3ZlOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5kYW5jZV9tb3ZlLA0KICAgICAgICAgIC8vIGxlZnRfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ubGVmdF90aW1lLA0KICAgICAgICAgIGxlZnRfZGFuY2VyOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5sZWZ0X2RhbmNlciwNCiAgICAgICAgICAvLyBjZW50ZXJfdGltZTogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX3RpbWUsDQogICAgICAgICAgY2VudGVyX2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uY2VudGVyX2RhbmNlciwNCiAgICAgICAgICAvLyByaWdodF90aW1lOiByZXNwb25zZS5kYXRhLnRhYmxlRGF0YVtqXS5yaWdodF90aW1lLA0KICAgICAgICAgIHJpZ2h0X2RhbmNlcjogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0ucmlnaHRfZGFuY2VyLA0KICAgICAgICAgIGRpZmY6IHJlc3BvbnNlLmRhdGEudGFibGVEYXRhW2pdLmRpZmZlcmVuY2UsDQogICAgICAgICAgc3luYzogcmVzcG9uc2UuZGF0YS50YWJsZURhdGFbal0uc3luYywNCiAgICAgICAgfTsNCiAgICAgICAgdGhpcy5kYW5jZXMucHVzaChkYW5jZUFycik7DQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRhYmxlRGF0ZSk7DQogICAgICB0aGlzLnBpZVJlc3BvbnNlTGVuZ3RoID0gcmVzcG9uc2UuZGF0YS5waWVEYXRhLmxlbmd0aDsNCiAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGhpcy5waWVSZXNwb25zZUxlbmd0aDsgaysrKSB7DQogICAgICAgIHZhciBwaWVfZGF0ZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5kYXRlcyk7DQogICAgICAgIHZhciBwaWVfZGF0ZV9zZ3QgPSBwaWVfZGF0ZS50b1N0cmluZygpOw0KICAgICAgICB2YXIgcGllX2RhdGVfc3BsaXRfYnlfc3BhY2UgPSBwaWVfZGF0ZV9zZ3Quc3BsaXQoIiAiKTsNCiAgICAgICAgdmFyIHBpZV9kYXRlX3NwbGl0ID0NCiAgICAgICAgICBwaWVfZGF0ZV9zcGxpdF9ieV9zcGFjZVsyXSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBwaWVfZGF0ZV9zcGxpdF9ieV9zcGFjZVsxXSArDQogICAgICAgICAgIiAiICsNCiAgICAgICAgICBwaWVfZGF0ZV9zcGxpdF9ieV9zcGFjZVszXTsNCiAgICAgICAgdGhpcy5waWVEYXRlLnB1c2gocGllX2RhdGVfc3BsaXQpOw0KICAgICAgICB2YXIgcGllQXJyID0gew0KICAgICAgICAgIGRhbmNlX3NldDogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLmRhbmNlX3NldCwNCiAgICAgICAgICBkYXRlOiBwaWVfZGF0ZV9zcGxpdCwNCiAgICAgICAgICB5ZXNfc3luYzogcmVzcG9uc2UuZGF0YS5waWVEYXRhW2tdLnllc19zeW5jLA0KICAgICAgICAgIG5vX3N5bmM6IHJlc3BvbnNlLmRhdGEucGllRGF0YVtrXS5ub19zeW5jLA0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLnBpZS5wdXNoKHBpZUFycik7DQogICAgICB9DQogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBpZSk7DQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmZldGNoRGF0YSgpOw0KICB9LA0KfTsNCg=="},{"version":3,"sources":["PastData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyLA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PastData.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container>\r\n    <div style=\"width: 20%; float:left\">\r\n      <psnd />\r\n    </div>\r\n    <div style=\"width: 80%; float:right\">\r\n      <v-row>\r\n        <v-col class=\"mx-auto\" md=\"3\">\r\n          <v-select\r\n            v-model=\"selectedChart\"\r\n            :items=\"chartType\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Chart Type\"\r\n            background-color=\"#A9D66E\"\r\n            prepend-icon=\"mdi-view-dashboard\"\r\n            clearable\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectChart\"\r\n            @click:clear=\"clearCharts\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\">\r\n          <v-select\r\n            v-model=\"search\"\r\n            :items=\"danceSetNum\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Dance Set(s)\"\r\n            background-color=\"#76D57C\"\r\n            prepend-icon=\"mdi-magnify\"\r\n            clearable\r\n            multiple\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectDanceSet\"\r\n            @click:clear=\"clearDanceSet\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\">\r\n          <v-select\r\n            v-model=\"selectedDancers\"\r\n            :items=\"dancers\"\r\n            item-text=\"name\"\r\n            item-value=\"value\"\r\n            filled\r\n            label=\"Dancer(s)\"\r\n            background-color=\"#00D19C\"\r\n            prepend-icon=\"mdi-account-multiple\"\r\n            clearable\r\n            multiple\r\n            dense\r\n            color=\"#000000\"\r\n            @input=\"selectDancers\"\r\n            @click:clear=\"clearDancers\"\r\n          />\r\n        </v-col>\r\n        <v-col class=\"mx-auto\" md=\"3\">\r\n          <v-menu\r\n            v-model=\"dateMenu\"\r\n            :nudge-right=\"40\"\r\n            :close-on-content-click=\"false\"\r\n            transition=\"scale-transition\"\r\n            offset-y\r\n            max-width=\"290px\"\r\n            min-width=\"290px\"\r\n          >\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-text-field\r\n                label=\"Choose Date(s)\"\r\n                :value=\"dateDisp\"\r\n                v-on=\"on\"\r\n                clearable\r\n                prepend-icon=\"mdi-calendar\"\r\n                background-color=\"#3DDBD8\"\r\n                filled\r\n                dense\r\n                color=\"#000000\"\r\n                @click:clear=\"clearDates\"\r\n              />\r\n            </template>\r\n            <v-date-picker\r\n              v-model=\"dateVal\"\r\n              @click:date=\"selectDates\"\r\n              :max=\"getEndDate\"\r\n              multiple\r\n            />\r\n          </v-menu>\r\n        </v-col>\r\n        <v-col class=\"mx-auto\" md=\"1\">\r\n          <v-btn icon color=\"green\" fab @click=\"submit\">\r\n            <v-icon>mdi-check</v-icon>\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n      <template v-if=\"haveTable && havePie\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-row>\r\n            <v-card width=\"65%\">\r\n              <v-card-title>\r\n                Dance Set {{ number }}\r\n                <br />\r\n                {{ tableDate[i] }} {{ danceTimeArray[i] }}\r\n                <v-spacer></v-spacer>\r\n              </v-card-title>\r\n              <v-data-table\r\n                :headers=\"headers\"\r\n                :items=\"getDances(number)\"\r\n              ></v-data-table>\r\n            </v-card>\r\n            <v-spacer />\r\n            <v-card width=\"30%\">\r\n              <v-card-title>\r\n                Sync Dance Set {{ number }}\r\n                <br />\r\n                {{ pieDate[i] }}\r\n                <v-spacer></v-spacer>\r\n              </v-card-title>\r\n              <PieChartStatic\r\n                :chartdata=\"getChartData(number)\"\r\n                :options=\"chartOptions\"\r\n              />\r\n            </v-card>\r\n          </v-row>\r\n        </v-list>\r\n      </template>\r\n      <template v-else-if=\"haveTable && !havePie\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-card width=\"100%\">\r\n            <v-card-title>\r\n              Dance Set {{ number }}\r\n              <br />\r\n              {{ tableDate[i] }} {{ danceTimeArray[i] }}\r\n              <v-spacer></v-spacer>\r\n            </v-card-title>\r\n            <v-data-table\r\n              :headers=\"headers\"\r\n              :items=\"getDances(number)\"\r\n            ></v-data-table>\r\n          </v-card>\r\n        </v-list>\r\n      </template>\r\n      <template v-else-if=\"havePie && !haveTable\">\r\n        <v-list v-for=\"(number, i) in danceSetArr\" :key=\"number\">\r\n          <v-card width=\"30%\">\r\n            <v-card-title>\r\n              Sync Dance Set {{ number }}\r\n              <br />\r\n              {{ pieDate[i] }}\r\n              <v-spacer></v-spacer>\r\n            </v-card-title>\r\n            <PieChartStatic\r\n              :chartdata=\"getChartData(number)\"\r\n              :options=\"chartOptions\"\r\n            />\r\n          </v-card>\r\n        </v-list>\r\n      </template>\r\n      <template v-else>\r\n        <v-card\r\n          class=\"mx-auto\"\r\n          width=\"60%\"\r\n          height=\"160\"\r\n          color=\"#ECEFF1\"\r\n          rounded\r\n        >\r\n          <v-card-title>\r\n            <v-row align=\"center\" justify=\"center\">\r\n              <v-icon light large center>mdi-emoticon-sad</v-icon>\r\n            </v-row>\r\n          </v-card-title>\r\n          <p class=\"text-center\">\r\n            What you are looking for cannot be found.\r\n            <br />Sorry!\r\n          </p>\r\n        </v-card>\r\n      </template>\r\n    </div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport psnd from \"./PersistentSideNavDrawer\";\r\nimport Swal from \"sweetalert2\";\r\nimport PieChartStatic from \"./Charts/PieChartStatic\";\r\n\r\nexport default {\r\n  name: \"PastData\",\r\n\r\n  components: {\r\n    psnd,\r\n    PieChartStatic,\r\n  },\r\n  data: () => ({\r\n    numDanceSet: null,\r\n    search: null,\r\n    selectedChart: null,\r\n    selectedDancers: null,\r\n    chartType: [\r\n      { name: \"Dance Table\", value: \"Table\" },\r\n      { name: \"Sync Chart\", value: \"Pie\" },\r\n    ],\r\n    dancers: [\r\n      { name: \"Jingxuan\", value: \"Jingxuan\" },\r\n      { name: \"Karan\", value: \"Karan\" },\r\n      { name: \"Kexin\", value: \"Kexin\" },\r\n      { name: \"Sarah\", value: \"Sarah\" },\r\n      { name: \"Tristy\", value: \"Tristy\" },\r\n      { name: \"Yunhan\", value: \"Yunhan\" },\r\n    ],\r\n    headers: [\r\n      { text: \"No.\", value: \"move_number\" },\r\n      { text: \"Dance Move\", value: \"dance_move\" },\r\n      // { text: \"Time (Left)\", value: \"left_time\" },\r\n      { text: \"Left Dancer\", value: \"left_dancer\" },\r\n      // { text: \"Time (Center)\", value: \"center_time\" },\r\n      { text: \"Center Dancer\", value: \"center_dancer\" },\r\n      // { text: \"Time (Right)\", value: \"right_time\" },\r\n      { text: \"Right Dancer\", value: \"right_dancer\" },\r\n      {\r\n        text: \"Sync Delay (seconds)\",\r\n        value: \"diff\",\r\n      },\r\n      {\r\n        text: \"In Sync?\",\r\n        value: \"sync\",\r\n      },\r\n    ],\r\n    dances: [],\r\n    danceSetNum: [],\r\n    dateMenu: false,\r\n    dateVal: null,\r\n    getEndDate: new Date().toISOString().substr(0, 10),\r\n    tableResponseLength: null,\r\n    pieResponseLength: null,\r\n    pie: [],\r\n    pieDate: [],\r\n    tableDate: [],\r\n    danceSetArr: [],\r\n    danceTimeArray: [],\r\n    startTime: null,\r\n    endTime: null,\r\n    havePie: true,\r\n    haveTable: true,\r\n    chartOptions: {\r\n      legend: {\r\n        display: true,\r\n      },\r\n      responsive: true,\r\n      maintainAspectRatio: true,\r\n      tooltips: {\r\n        callbacks: {\r\n          label: function(tooltipItem, data) {\r\n            var allData = data.datasets[tooltipItem.datasetIndex].data;\r\n            var tooltipLabel = data.labels[tooltipItem.index];\r\n            var tooltipData = allData[tooltipItem.index];\r\n            var total = 0;\r\n            for (var i in allData) {\r\n              total += allData[i];\r\n            }\r\n            var tooltipPercentage = Math.round((tooltipData / total) * 100);\r\n            return (\r\n              tooltipLabel +\r\n              \": \" +\r\n              tooltipData +\r\n              \" (\" +\r\n              tooltipPercentage +\r\n              \"%)\"\r\n            );\r\n          },\r\n        },\r\n      },\r\n    },\r\n  }),\r\n  computed: {\r\n    dateDisp() {\r\n      return this.dateVal;\r\n    },\r\n  },\r\n  methods: {\r\n    clearCharts: function() {\r\n      this.selectedChart = null;\r\n    },\r\n    selectChart: function() {\r\n      if (this.selectedChart != null) {\r\n        if (this.selectedChart === \"Table\") {\r\n          console.log(\"get data from Dance\");\r\n        } else if (this.selectedChart === \"Pie\") {\r\n          console.log(\"get data from Sync\");\r\n        }\r\n      } else {\r\n        console.log(\"display all dancers\");\r\n      }\r\n    },\r\n    clearDanceSet: function() {\r\n      this.search = null;\r\n    },\r\n    selectDanceSet: function() {\r\n      if (this.search != null && this.search.length > 0) {\r\n        var length = this.search.length;\r\n        for (var k = 0; k < length; k++) {\r\n          console.log(this.search[k]);\r\n        }\r\n      } else {\r\n        this.search = null;\r\n      }\r\n    },\r\n    clearDancers: function() {\r\n      this.selectedDancers = null;\r\n    },\r\n    selectDancers: function() {\r\n      if (this.selectedDancers != null && this.selectedDancers.length > 0) {\r\n        var length = this.selectedDancers.length;\r\n        if (length > 3) {\r\n          Swal.fire({\r\n            icon: \"error\",\r\n            title: \"Oops...\",\r\n            text: \"A maximum of 3 dancers are allowed!\",\r\n          });\r\n          this.selectedDancers.pop();\r\n        }\r\n        for (var i = 0; i < this.selectedDancers.length; i++) {\r\n          console.log(this.selectedDancers[i]);\r\n        }\r\n      } else {\r\n        this.selectedDancers = null;\r\n      }\r\n    },\r\n    clearDates: function() {\r\n      this.dateVal = null;\r\n    },\r\n    selectDates: function() {\r\n      if (this.dateVal != null) {\r\n        console.log(this.dateVal.length);\r\n        for (var j = 0; j < this.dateVal.length; j++) {\r\n          console.log(this.dateVal[j]);\r\n        }\r\n      } else {\r\n        console.log(\"display all dates\");\r\n      }\r\n    },\r\n    submit: function() {\r\n      // data in selectedDancers are to be taken as AND i.e. the dance sets must contain the dancer names\r\n      // data in dateVal is to be taken as OR\r\n      // data in search is to be taken as OR\r\n      // selectedChart refers to the DB Table (Table: Dance, Pie: Sync)\r\n      // SELECT * FROM Dance/Sync WHERE (dancerNames='%this.selectedDancerss%') i.e. Pattern Matching\r\n      //  AND (this.dateVal) AND (this.search)\r\n\r\n      console.log(\"Dancers: \" + this.selectedDancers);\r\n      if (this.selectedDancers != null) {\r\n        this.selectedDancers = this.selectedDancers.sort();\r\n        var dancers = '\"';\r\n        for (var i = 0; i < this.selectedDancers.length; i++) {\r\n          dancers += this.selectedDancers[i] + \",\";\r\n        }\r\n        dancers = dancers.slice(0, -1);\r\n        dancers += '\"';\r\n      } else {\r\n        dancers = null;\r\n      }\r\n\r\n      if (this.dateVal != null) {\r\n        this.dateVal = this.dateVal.sort();\r\n        var dates = '\"';\r\n        for (var j = 0; j < this.dateVal.length; j++) {\r\n          dates += this.dateVal[j] + \",\";\r\n        }\r\n        dates = dates.slice(0, -1);\r\n        dates += '\"';\r\n      } else {\r\n        dates = null;\r\n      }\r\n\r\n      if (this.search != null) {\r\n        this.search = this.search.sort();\r\n        var searchDanceSets = '\"';\r\n        for (var k = 0; k < this.search.length; k++) {\r\n          searchDanceSets += this.search[k] + \",\";\r\n        }\r\n        searchDanceSets = searchDanceSets.slice(0, -1);\r\n        searchDanceSets += '\"';\r\n      } else {\r\n        searchDanceSets = null;\r\n      }\r\n\r\n      const pastDataToSend =\r\n        '{\"chart\":\"' +\r\n        this.selectedChart +\r\n        '\", ' +\r\n        '\"dancers\":' +\r\n        dancers +\r\n        ', \"dates\":' +\r\n        dates +\r\n        ', \"search\":' +\r\n        searchDanceSets +\r\n        \"}\";\r\n      // console.log(pastDataToSend);\r\n      var jsonPastDataToSend = JSON.parse(pastDataToSend);\r\n      console.log(\"Past Data To Send: \" + JSON.stringify(jsonPastDataToSend));\r\n\r\n      axios\r\n        .post(\"/dashboard/past-data\", {\r\n          pastData: jsonPastDataToSend,\r\n        })\r\n        .then((response) => {\r\n          // console.log(response.data);\r\n          // console.log(response.data.tableData.length);\r\n          // console.log(response.data.pieData.length);\r\n          this.dances = [];\r\n          this.tableDate = [];\r\n          this.danceSetArr = [];\r\n          this.pie = [];\r\n          this.pieDate = [];\r\n          this.danceTimeArray = [];\r\n          if (\r\n            response.data.tableData.length > 0 &&\r\n            (response.data.pieData.length == undefined ||\r\n              response.data.pieData.length == 0)\r\n          ) {\r\n            this.haveTable = true;\r\n            this.havePie = false;\r\n            this.tableResponseLength = response.data.tableData.length;\r\n\r\n            for (var j = 0; j < this.tableResponseLength; j++) {\r\n              var date_utc = new Date(response.data.tableData[j].dates);\r\n              var date_convert_to_sgt = date_utc.toString();\r\n              var split_sgt_date_by_space = date_convert_to_sgt.split(\" \");\r\n              var formatted_date =\r\n                split_sgt_date_by_space[2] +\r\n                \" \" +\r\n                split_sgt_date_by_space[1] +\r\n                \" \" +\r\n                split_sgt_date_by_space[3];\r\n              if (response.data.tableData[j].move_number == 1) {\r\n                this.tableDate.push(formatted_date);\r\n                this.danceSetArr.push(response.data.tableData[j].dance_set);\r\n              }\r\n              if (response.data.tableData[j].dance_move == \"Start\") {\r\n                if (\r\n                  response.data.tableData[j].left_time <=\r\n                    response.data.tableData[j].center_time &&\r\n                  response.data.tableData[j].left_time <=\r\n                    response.data.tableData[j].right_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[j].left_time;\r\n                } else if (\r\n                  response.data.tableData[j].center_time <=\r\n                    response.data.tableData[j].left_time &&\r\n                  response.data.tableData[j].center_time <=\r\n                    response.data.tableData[j].right_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[j].center_time;\r\n                } else if (\r\n                  response.data.tableData[j].right_time <=\r\n                    response.data.tableData[j].left_time &&\r\n                  response.data.tableData[j].right_time <=\r\n                    response.data.tableData[j].center_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[j].right_time;\r\n                }\r\n                var startTime_split = this.startTime.split(\":\");\r\n                if (startTime_split[0] == \"24\") {\r\n                  startTime_split[0] == \"00\";\r\n                }\r\n                this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n              } else if (response.data.tableData[j].dance_move == \"End\") {\r\n                if (\r\n                  response.data.tableData[j].left_time >=\r\n                    response.data.tableData[j].center_time &&\r\n                  response.data.tableData[j].left_time >=\r\n                    response.data.tableData[j].right_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[j].left_time;\r\n                } else if (\r\n                  response.data.tableData[j].center_time >=\r\n                    response.data.tableData[j].left_time &&\r\n                  response.data.tableData[j].center_time >=\r\n                    response.data.tableData[j].right_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[j].center_time;\r\n                } else if (\r\n                  response.data.tableData[j].right_time >=\r\n                    response.data.tableData[j].left_time &&\r\n                  response.data.tableData[j].right_time >=\r\n                    response.data.tableData[j].center_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[j].right_time;\r\n                }\r\n                var endTime_split = this.endTime.split(\":\");\r\n                if (endTime_split[0] == \"24\") {\r\n                  endTime_split[0] == \"00\";\r\n                }\r\n                this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n                var timeOfDance = this.startTime + \" - \" + this.endTime;\r\n                this.danceTimeArray.push(timeOfDance);\r\n              }\r\n              var danceArr = {\r\n                dance_set: response.data.tableData[j].dance_set,\r\n                move_number: response.data.tableData[j].move_number,\r\n                date: formatted_date,\r\n                dance_move: response.data.tableData[j].dance_move,\r\n                // left_time: response.data.tableData[j].left_time,\r\n                left_dancer: response.data.tableData[j].left_dancer,\r\n                // center_time: response.data.tableData[j].center_time,\r\n                center_dancer: response.data.tableData[j].center_dancer,\r\n                // right_time: response.data.tableData[j].right_time,\r\n                right_dancer: response.data.tableData[j].right_dancer,\r\n                diff: response.data.tableData[j].difference,\r\n                sync: response.data.tableData[j].sync,\r\n              };\r\n              this.dances.push(danceArr);\r\n            }\r\n          } else if (\r\n            response.data.pieData.length > 0 &&\r\n            (response.data.tableData.length == undefined ||\r\n              response.data.tableData.length == 0)\r\n          ) {\r\n            this.havePie = true;\r\n            this.haveTable = false;\r\n            this.pieResponseLength = response.data.pieData.length;\r\n            for (var k = 0; k < this.pieResponseLength; k++) {\r\n              var pie_date = new Date(response.data.pieData[k].dates);\r\n              var pie_date_sgt = pie_date.toString();\r\n              var pie_date_split_by_space = pie_date_sgt.split(\" \");\r\n              var pie_date_split =\r\n                pie_date_split_by_space[2] +\r\n                \" \" +\r\n                pie_date_split_by_space[1] +\r\n                \" \" +\r\n                pie_date_split_by_space[3];\r\n              this.pieDate.push(pie_date_split);\r\n              this.danceSetArr.push(response.data.pieData[k].dance_set);\r\n              var pieArr = {\r\n                dance_set: response.data.pieData[k].dance_set,\r\n                date: pie_date_split,\r\n                yes_sync: response.data.pieData[k].yes_sync,\r\n                no_sync: response.data.pieData[k].no_sync,\r\n              };\r\n              this.pie.push(pieArr);\r\n            }\r\n            // console.log(this.pie);\r\n          } else if (\r\n            (response.data.pieData.length == undefined &&\r\n              response.data.tableData.length == undefined) ||\r\n            (response.data.pieData.length == 0 &&\r\n              response.data.tableData.length == 0)\r\n          ) {\r\n            this.haveTable = false;\r\n            this.havePie = false;\r\n          } else {\r\n            this.haveTable = true;\r\n            this.havePie = true;\r\n            this.tableResponseLength = response.data.tableData.length;\r\n            for (var m = 0; m < this.tableResponseLength; m++) {\r\n              var dates = new Date(response.data.tableData[m].dates);\r\n              var sgt_date = dates.toString();\r\n              var split_date_by_space = sgt_date.split(\" \");\r\n              var split_date =\r\n                split_date_by_space[2] +\r\n                \" \" +\r\n                split_date_by_space[1] +\r\n                \" \" +\r\n                split_date_by_space[3];\r\n              if (response.data.tableData[m].move_number == 1) {\r\n                this.tableDate.push(split_date);\r\n                this.danceSetArr.push(response.data.tableData[m].dance_set);\r\n              }\r\n              if (response.data.tableData[m].dance_move == \"Start\") {\r\n                if (\r\n                  response.data.tableData[m].left_time <=\r\n                    response.data.tableData[m].center_time &&\r\n                  response.data.tableData[m].left_time <=\r\n                    response.data.tableData[m].right_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[m].left_time;\r\n                } else if (\r\n                  response.data.tableData[m].center_time <=\r\n                    response.data.tableData[m].left_time &&\r\n                  response.data.tableData[m].center_time <=\r\n                    response.data.tableData[m].right_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[m].center_time;\r\n                } else if (\r\n                  response.data.tableData[m].right_time <=\r\n                    response.data.tableData[m].left_time &&\r\n                  response.data.tableData[m].right_time <=\r\n                    response.data.tableData[m].center_time\r\n                ) {\r\n                  this.startTime = response.data.tableData[m].right_time;\r\n                }\r\n                startTime_split = this.startTime.split(\":\");\r\n                if (startTime_split[0] == \"24\") {\r\n                  startTime_split[0] == \"00\";\r\n                }\r\n                this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n              } else if (response.data.tableData[m].dance_move == \"End\") {\r\n                if (\r\n                  response.data.tableData[m].left_time >=\r\n                    response.data.tableData[m].center_time &&\r\n                  response.data.tableData[m].left_time >=\r\n                    response.data.tableData[m].right_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[m].left_time;\r\n                } else if (\r\n                  response.data.tableData[m].center_time >=\r\n                    response.data.tableData[m].left_time &&\r\n                  response.data.tableData[m].center_time >=\r\n                    response.data.tableData[m].right_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[m].center_time;\r\n                } else if (\r\n                  response.data.tableData[m].right_time >=\r\n                    response.data.tableData[m].left_time &&\r\n                  response.data.tableData[m].right_time >=\r\n                    response.data.tableData[m].center_time\r\n                ) {\r\n                  this.endTime = response.data.tableData[m].right_time;\r\n                }\r\n                endTime_split = this.endTime.split(\":\");\r\n                if (endTime_split[0] == \"24\") {\r\n                  endTime_split[0] == \"00\";\r\n                }\r\n                this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n                timeOfDance = this.startTime + \" - \" + this.endTime;\r\n                this.danceTimeArray.push(timeOfDance);\r\n              }\r\n              var danceArray = {\r\n                dance_set: response.data.tableData[m].dance_set,\r\n                move_number: response.data.tableData[m].move_number,\r\n                date: split_date,\r\n                dance_move: response.data.tableData[m].dance_move,\r\n                // left_time: response.data.tableData[m].left_time,\r\n                left_dancer: response.data.tableData[m].left_dancer,\r\n                // center_time: response.data.tableData[m].center_time,\r\n                center_dancer: response.data.tableData[m].center_dancer,\r\n                // right_time: response.data.tableData[m].right_time,\r\n                right_dancer: response.data.tableData[m].right_dancer,\r\n                diff: response.data.tableData[m].difference,\r\n                sync: response.data.tableData[m].sync,\r\n              };\r\n              this.dances.push(danceArray);\r\n            }\r\n            this.pieResponseLength = response.data.pieData.length;\r\n            for (var n = 0; n < this.pieResponseLength; n++) {\r\n              var date_pie = new Date(response.data.pieData[n].dates);\r\n              var date_pie_sgt = date_pie.toString();\r\n              var date_pie_split_by_space = date_pie_sgt.split(\" \");\r\n              var date_pie_split =\r\n                date_pie_split_by_space[2] +\r\n                \" \" +\r\n                date_pie_split_by_space[1] +\r\n                \" \" +\r\n                date_pie_split_by_space[3];\r\n              this.pieDate.push(date_pie_split);\r\n              var pieArray = {\r\n                dance_set: response.data.pieData[n].dance_set,\r\n                date: date_pie_split,\r\n                yes_sync: response.data.pieData[n].yes_sync,\r\n                no_sync: response.data.pieData[n].no_sync,\r\n              };\r\n              this.pie.push(pieArray);\r\n            }\r\n          }\r\n\r\n          // console.log(\"Have Table: \" + this.haveTable);\r\n          // console.log(\"Have Pie: \" + this.havePie);\r\n          console.log(\"Dance Sets: \" + this.danceSetArr);\r\n          console.log(\"Pie Data: \" + JSON.stringify(this.pie));\r\n        });\r\n    },\r\n    getChartData: function(set_number) {\r\n      for (let m = 0; m < this.pieResponseLength; m++) {\r\n        if (this.pie[m].dance_set == set_number) {\r\n          let yes = this.pie[m].yes_sync;\r\n          let no = this.pie[m].no_sync;\r\n          console.log(\"Number: \" + set_number);\r\n          console.log(\"Yes: \" + yes + \", No: \" + no);\r\n          let pieChartArray = {\r\n            labels: [\"Yes\", \"No\"],\r\n            datasets: [\r\n              {\r\n                borderWidth: 1,\r\n                borderColor: [\"rgba(245, 66, 158, 1)\", \"rgba(66, 194, 245, 1)\"],\r\n                backgroundColor: [\r\n                  \"rgba(245, 66, 158, 1)\",\r\n                  \"rgba(66, 194, 245, 1)\",\r\n                ],\r\n                data: [yes, no],\r\n              },\r\n            ],\r\n          };\r\n          console.log(pieChartArray);\r\n          return pieChartArray;\r\n        }\r\n      }\r\n    },\r\n    getDances: function(set_number) {\r\n      var danceDataArray = [];\r\n      for (var j = 0; j < this.tableResponseLength; j++) {\r\n        if (this.dances[j].dance_set == set_number) {\r\n          var danceData = {\r\n            move_number: this.dances[j].move_number,\r\n            date: this.dances[j].date,\r\n            dance_move: this.dances[j].dance_move,\r\n            // left_time: this.dances[j].left_time,\r\n            left_dancer: this.dances[j].left_dancer,\r\n            // center_time: this.dances[j].center_time,\r\n            center_dancer: this.dances[j].center_dancer,\r\n            // right_time: this.dances[j].right_time,\r\n            right_dancer: this.dances[j].right_dancer,\r\n            diff: this.dances[j].diff,\r\n            sync: this.dances[j].sync,\r\n          };\r\n          danceDataArray.push(danceData);\r\n        }\r\n      }\r\n      return danceDataArray;\r\n    },\r\n    fetchData: async function() {\r\n      const response = await axios.get(\"/dashboard/past-data\");\r\n      // console.log(response.data.pieData);\r\n      // console.log(response.data.tableData);\r\n      // console.log(response.data.tableData.length);\r\n      // console.log(response.data.pieData.length);\r\n      this.numDanceSet = response.data.tableData[0].dance_set;\r\n      for (var i = 1; i <= this.numDanceSet; i++) {\r\n        var arr = {\r\n          name: i,\r\n          value: i,\r\n        };\r\n        this.danceSetNum.push(arr);\r\n      }\r\n      this.tableResponseLength = response.data.tableData.length;\r\n      for (var j = 0; j < this.tableResponseLength; j++) {\r\n        // console.log(response.data.tableData[j].dates);\r\n        var date = new Date(response.data.tableData[j].dates);\r\n        var date_sgt = date.toString();\r\n        var date_split_by_space = date_sgt.split(\" \");\r\n        var date_split =\r\n          date_split_by_space[2] +\r\n          \" \" +\r\n          date_split_by_space[1] +\r\n          \" \" +\r\n          date_split_by_space[3];\r\n        // console.log(date_split);\r\n        if (response.data.tableData[j].move_number == 1) {\r\n          this.tableDate.push(date_split);\r\n          this.danceSetArr.push(response.data.tableData[j].dance_set);\r\n        }\r\n\r\n        if (response.data.tableData[j].dance_move == \"Start\") {\r\n          if (\r\n            response.data.tableData[j].left_time <=\r\n              response.data.tableData[j].center_time &&\r\n            response.data.tableData[j].left_time <=\r\n              response.data.tableData[j].right_time\r\n          ) {\r\n            this.startTime = response.data.tableData[j].left_time;\r\n          } else if (\r\n            response.data.tableData[j].center_time <=\r\n              response.data.tableData[j].left_time &&\r\n            response.data.tableData[j].center_time <=\r\n              response.data.tableData[j].right_time\r\n          ) {\r\n            this.startTime = response.data.tableData[j].center_time;\r\n          } else if (\r\n            response.data.tableData[j].right_time <=\r\n              response.data.tableData[j].left_time &&\r\n            response.data.tableData[j].right_time <=\r\n              response.data.tableData[j].center_time\r\n          ) {\r\n            this.startTime = response.data.tableData[j].right_time;\r\n          }\r\n          var startTime_split = this.startTime.split(\":\");\r\n          if (startTime_split[0] == \"24\") {\r\n            startTime_split[0] == \"00\";\r\n          }\r\n          this.startTime = startTime_split[0] + \":\" + startTime_split[1];\r\n        } else if (response.data.tableData[j].dance_move == \"End\") {\r\n          if (\r\n            response.data.tableData[j].left_time >=\r\n              response.data.tableData[j].center_time &&\r\n            response.data.tableData[j].left_time >=\r\n              response.data.tableData[j].right_time\r\n          ) {\r\n            this.endTime = response.data.tableData[j].left_time;\r\n          } else if (\r\n            response.data.tableData[j].center_time >=\r\n              response.data.tableData[j].left_time &&\r\n            response.data.tableData[j].center_time >=\r\n              response.data.tableData[j].right_time\r\n          ) {\r\n            this.endTime = response.data.tableData[j].center_time;\r\n          } else if (\r\n            response.data.tableData[j].right_time >=\r\n              response.data.tableData[j].left_time &&\r\n            response.data.tableData[j].right_time >=\r\n              response.data.tableData[j].center_time\r\n          ) {\r\n            this.endTime = response.data.tableData[j].right_time;\r\n          }\r\n          var endTime_split = this.endTime.split(\":\");\r\n          if (endTime_split[0] == \"24\") {\r\n            endTime_split[0] == \"00\";\r\n          }\r\n          this.endTime = endTime_split[0] + \":\" + endTime_split[1];\r\n          var timeOfDance = this.startTime + \" - \" + this.endTime;\r\n          this.danceTimeArray.push(timeOfDance);\r\n        }\r\n        var danceArr = {\r\n          dance_set: response.data.tableData[j].dance_set,\r\n          move_number: response.data.tableData[j].move_number,\r\n          date: date_split,\r\n          dance_move: response.data.tableData[j].dance_move,\r\n          // left_time: response.data.tableData[j].left_time,\r\n          left_dancer: response.data.tableData[j].left_dancer,\r\n          // center_time: response.data.tableData[j].center_time,\r\n          center_dancer: response.data.tableData[j].center_dancer,\r\n          // right_time: response.data.tableData[j].right_time,\r\n          right_dancer: response.data.tableData[j].right_dancer,\r\n          diff: response.data.tableData[j].difference,\r\n          sync: response.data.tableData[j].sync,\r\n        };\r\n        this.dances.push(danceArr);\r\n      }\r\n      // console.log(this.tableDate);\r\n      this.pieResponseLength = response.data.pieData.length;\r\n      for (var k = 0; k < this.pieResponseLength; k++) {\r\n        var pie_date = new Date(response.data.pieData[k].dates);\r\n        var pie_date_sgt = pie_date.toString();\r\n        var pie_date_split_by_space = pie_date_sgt.split(\" \");\r\n        var pie_date_split =\r\n          pie_date_split_by_space[2] +\r\n          \" \" +\r\n          pie_date_split_by_space[1] +\r\n          \" \" +\r\n          pie_date_split_by_space[3];\r\n        this.pieDate.push(pie_date_split);\r\n        var pieArr = {\r\n          dance_set: response.data.pieData[k].dance_set,\r\n          date: pie_date_split,\r\n          yes_sync: response.data.pieData[k].yes_sync,\r\n          no_sync: response.data.pieData[k].no_sync,\r\n        };\r\n        this.pie.push(pieArr);\r\n      }\r\n      // console.log(this.pie);\r\n    },\r\n  },\r\n  created() {\r\n    this.fetchData();\r\n  },\r\n};\r\n</script>\r\n"]}]}